as peer-to-peer  p1p  networks become more familiar to the database community  intense interest has built up in using their scalability and resilience properties to scale database applications. indexing methods are adapted on top of p1p networks and querying methods are developed to handle the data distribution on different nodes. these procedures largely depend on how nodes are connected to each other. so far  limited attempts have been made to compare all these systems in a generalized framework. this is because the systems are quite different from each other  and there are so many of them that brute force comparison is practically impossible. fortunately  it has recently been observed that a large subset of the most important p1p networks share a common algebraic and combinatorial base  in the form of cayley graphs.
　the specific requirements of peer-based data management systems  pdms   such as query completeness  range queries  load balancing  communication overhead  and scalability are strongly related to the properties of the underlying graphs  and naturally  some graphs are better than others. we conduct a comprehensive graph-theoretic analysis from the point of view of pdms and identify the necessary conditions for a graph to be considered a potential network structure for a pdms. in so doing  we provide a basis for the future development of such networks. we complement our analytical study with extensive experimental results and identify three measures that provide significant information about the potential of a  cayley  graph to support the requirements of a pdms.
categories and subject descriptors
c.1  computer systems organization : performance of systems-fault tolerance; e.1  data : data structures- graphs and networks
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. to copy otherwise  to republish  to post on servers or to redistribute to lists  requires prior specific permission and/or a fee.
sigmod'1  june 1  1  vancouver  bc  canada.
copyright 1 acm 1-1-1/1 ...$1.
general terms
performance  reliability  theory
keywords
cayley graph  peer-to-peer  query completeness
1.	introduction
　a large number of peer-to-peer  p1p  networks have been introduced in the literature since their popular advent in the late 1s. in particular  structured p1p overlays have gained much attention since 1. they are noted mainly for their theoretical properties such as balancing of communication  storage and processing load  and elegance of design. while unstructured p1p networks may have received much public attention for their file-sharing utility  they are not suitable for most other applications as they do not provide guarantees of any kind. in particular  existing data may not always be retrievable in unstructured p1p networks even in optimal operating conditions. this renders the networks largely unusable for distributed databases  or any other application where the existence or non-existence of a piece of information makes an essential and otherwise unpredictable difference in the result of a query.
　in the context of structured overlays  sensitivity to temporary node absence has also not been fully addressed. though there has been considerable interest in the database community for p1p systems  1  1  1  1   a result of which has been the creation of a new acronym: pdms - peer-based data management system   most works assume that node failures are dealt with at the lower levels of the systems' architectures via expensive periodic network stabilizations. note for instance that pdms research papers often describe node failures as being outside their scope and focus on data distribution and query processing.
　we have to take a step back and look at the underlying structure and  in particular  at its potential of tolerating node failures. function of this tolerance  more or less costly compensation measures will need to be taken in order to guarantee a proper functionality. these measures introduce overhead  and based on our expectation of node failures  we need  at design time  to make a decision on what kind of structure to use for the underlying interconnection network. in this context  our work provides an analytical basis  coupled with a simulation environment  by which the designer of a pdms can choose the underlying network. what makes can  better than chord  or baton  better than can  or more generally  one structure better than another 
italic values show the order of the largest graph known for each  Δ d 
 1
	 1	 1	 1	 1	 1	 1	 1	 1	 1	 1
maximum node degree  Δ 
figure 1: maximal cardinality of instances of some well-known networks
and what does better mean  these are the questions that we seek to answer now.
　there is a long stream of proposals on structured p1p networks. chord   can   baton   skipnet   viceroy   hypercup  and overcast  form a representative sample of the variety that exists. a good survey may be found in .
　the various structured p1p networks may be grouped into two types: those having small routing tables but large routing paths  and those having small routing paths but large routing tables. two extremes are baton*  and cycloid . while the former increases its maximum degree exponentially but keeps the diameter logarithmic with a large base  the latter maintains a constant maximum degree  but increases its diameter polynomially. the balance between the number of neighbors and the maximum path between two nodes is known as the  degree  diameter -problem in graph theory. in figure 1 we plot the order  maximum number of nodes  of some small instances of well-known p1p networks  to show how each overlay increases its order either by an increased diameter or by an increased degree. we also plot the order of the largest known graph for each  degree  diameter  pair. interestingly  this reveals much space for improvement: known graphs are able to hold many more nodes using the same degree and diameter as the overlays exemplified in this figure. therefore  we conjecture that not all graphs are good models for pdms and we seek to identify a set of measures to help us decide which is a potentially good structure and which is not.
　structured overlays also differ as a consequence of their intended usage  and correspondingly  of the algorithms implemented on top of them. however  this may be seen as just a particular way to label the nodes  and given an appropriate re-labeling function  the algorithms can be applied on top of each overlay. the existence of such a re-labeling function depends only on the type of structure that is used to connect the nodes. we will see that even apparently very different network overlays  such as baton  based on a tree structure  and chord  based on a ring structure  can be very similar if an appropriate relabeling function is found.
　recently   and  have observed that most structured overlay networks have cayley graphs as their static architecture. these abstract algebra graphs have been studied in the late 1s and early 1s in the context of parallel computers  processor interconnection networks   but properties that are considered important in that context  like planarity - the possibility to arrange the nodes without intersecting the edges  are not relevant in p1p overlays. we propose a new analysis for a better understanding of a graph's potential to constitute the basis of the next pdms. additionally  we address the proposal of  and  to use the star graph as underlying structure and analyze it from the point of view of a pdms.
　this work is part of a larger  comprehensive project under development at the school of computing  nus  entitled bestpeer. this framework provides a broad range of querying and searching facilities over various types of data sources and is build on a flexible p1p platform that can switch smoothly between structured and unstructured overlays.
1	motivation
　it is important to understand the extent to which the overlay network is capable of handling faults. this is particularly true for systems that deal with aggregate queries  and even if the assumption is that an optimal routing scheme is implemented. for instance  in defining their aggregate query semantic  bawa et al.  assume that the failure of a node can be compensated with an update in the neighborhood. while this may be true in most cases  there may also be situations where the quasi-simultaneous failure of a relatively small sets of nodes could divide the network in two disjoint subnetworks. such a situation will trigger a massive update process in all the nodes of the original network. a system designer will need to consider this problem.
　the same problem appears in   where the authors deal with data mappings on p1p networks. temporarily unavailable nodes may in this case result in a lack of constraints  and consequently  the deduction of false mappings.
　more recently  the database community has been interested in providing quality guarantees to systems developed on top of p1p networks. in  and later in  and   the authors argue for correctness  availability and load balancing guarantees for data and query distribution on p1p networks. in the meantime  they developed their techniques  in the context of a general p1p indexing framework that can be instantiated with most p1p index structures in the literature . as we will show in this paper  interconnection networks have significantly different fault tolerances. therefore  before guaranteeing correctness or load balancing  it is important to take a closer look at whether the network even allows a maximal connectivity in the presence of failures.
　our preliminary analysis leads us to the observation that many existing pdms are mappable to cayley graphs despite their apparent differences. for instance  we have taken a close look at baton   a recently proposed tree-based pdms capable of answering both equality and range queries. we have observed that  provided the addition of one node  regardless of the size of the tree   there exists a mapping between the tree and the chordal ring representations. in particular  if directed  this chordal ring representation forms the well-known chord network . in figure 1  it's not difficult to observe that the function Υh : {1 ... h}〜 {1 ... 1l 1} ★ {1 ... 1h   1}  Υh  l j   = 1h l 1j   1  represents an isomorphism between the two graphs.
　the existence of such a mapping indicates that the study of the subclass of structured p1p networks based on cayley

	a.	b.
figure 1: the baton structure drawn as in   a.  and as the cayley graph representing chord

figure 1: relationships between pdms requirements and graph properties graphs provides useful insights for a much larger array of networks than what may be initially expected.
1	contributions
　we systematically analyze a representative subset of the existing p1p networks used in pdms and show the necessary conditions for the underlying graph structures  in terms of common measures of graph optimality. each such measure has a direct effect on one of the properties of a pdms  as indicated in figure 1.
　in particular  we are interested in query completeness  which we define here as the amount of relevant information present in the live nodes of the network when a query is issued. this is obviously determined by the connectivity of the graph underlying the network  by fault tolerance  and as we will see  by node bisection width. the main idea is to consider a network as being better if the failure of a node or a small set of nodes does not create a cone of shadow   i.e.  it does not make another set of nodes unavailable. our contributions are as follows:
  we improve upon the cayley graph models presented previously for p1p networks  correcting two existing misrepresentations in the models of the can and viceroy networks. we do this in section 1.
  we re-examine the basic  set of graph-theoretic mea-
sures which have been previously considered in the literature and show that they provide little and misleading decision support for pdms system designers in section 1:
node degree: refers to the number of neighbors that each peer maintains. a higher value increases reliability but also maintenance cost.
vertex transitivity: expresses the symmetry of the network. if a graph is vertex transitive  then any node can be equally loaded. a perfect counterexample of this property is a tree - the root will always be overloaded.
edge transitivity: expresses the balancing of the load on each edge and is assumed to correspond to communication bandwidth balancing.
optimal fault tolerance: indicates that the number of nodes that can fail without segmenting the network into two disjoint sub-networks is minimal. though apparently useful  we will show that for p1p networks  this measure is insufficiently informative.
  having observed that previously used graph measures are not sufficiently informative for p1p networks  in section 1 we provide an in-depth analysis of the overlays based on:
diameter resilience: characterizes the effects of node failure on the maximum distance between any two nodes.
bisection width: refers to the number of nodes or edges that need to be removed to segment the network into two subnetworks of  almost  equal size.
hierarchy: characterizes the capacity of a network overlay to expand its id space.
hamiltonicity: the existence or absence of a way to traverse all the nodes in an orderly fashion affects the fault tolerance of the network  the routing method and the possibility of answering range queries efficiently.
  along with the analysis of the properties of each network  we perform extensive simulation experiments in section 1:
- we provide a plug-and-play network simulator based on cayley graphs  with which we have implemented and tested 1 different network architectures.
- we test network performance in terms of query success rates and maximum path length in the context of an optimal routing method which always finds a path if one exists.
- we implement routing protocols described in the original papers of cycloid   viceroy   hypercup  and chord  and compare them with their estimated performance based on the default graph routing method.
- we show the flexibility of our simulator by implementing a non-cayley network  baton  and compare its performance against the execution on planetlab of the real network.
　in section 1  we conclude with the set of measures that need to be considered when choosing or designing a particular interconnection strategy for a pdms.
1.	terminology and notation
　we provide a set of basic definitions from graph and group theory to facilitate discussions in the sections that follow.
　definition 1. a digraph g =  vg eg  is a set of vertices vg and a set eg of directed edges  or arcs   u v  （ vg 〜 vg.
　throughout this paper we will consider the graphs to be directed graphs  digraphs  because we are counting entries in the routing tables  and for each undirected edge  we have two such entries. it is thus natural to consider an undirected edge as two directed edges. where obvious  we will avoid using the index g.
　definition 1. the degree of a node v （ v   denoted δ v   is the number of outgoing edges from v.
　definition 1. a digraph g is strongly connected if there exists a path between any two vertices. the connectivity number of the graph g  denoted by λ  is the minimal number of nodes whose removal disconnects the graph. then  the fault tolerance of a graph is λ   1.
　definition 1. a graph g is called optimally fault tolerant if its connectivity number is equal to the smallest degree of any of its nodes: λ = minv {δ v |v （ v }.
now  some basic abstract algebra definitions:
　definition 1. a group g =  x    is a set of elements x together with a binary operation   : x 〜x ★ x with the following properties:
closure:  x y （ x : x   y （ x associativity:  x y z （ x : x    y   z  =  x   y    z identity:  e （ xs.t. x （ x : x   e = e   x = x inverse:  x （ x  y （ xs.t.x   y = y   x = e.  not. x 1 =
y 
　by an abuse of notation  we will often write g as the set of elements of the group. we will refer to the binary operation of a generic group as multiplication.
　definition 1. a subset s   g is called a generating set of g if every element g （ g can be written as the multiplication of a finite set of elements from s. s is called a minimal generating set if  k （ s  s {k} is not a generating set.
　a generating set s is symmetric if it is closed under inverses: s （ s   s 1 （ s.
finally  the definition of a cayley graph  group graph :
　definition 1. a cayley graph cay g s  given by a group g and a subset s   g is the graph whose vertices are the elements of the group and there exists an arc between any two vertices u v if and only if there exists an element s （ s such that v = u s. where useful  we will label this arc with the element s.
1.	related work
　assessing the quality of p1p networks is a problem that has received considerable attention  mostly in comparing some new proposal with an existing one. virtually all newly introduced p1p networks have such a characterization  showing improvement against previous solutions.
　still  it remains difficult for a system designer to choose among the various structures. one solution is  of course  to take all the networks  or as many as possible  and run them with the same data to see which one performs best according to some specific metric of interest. a recent such approach is that of . the problem with such a test is that one has to implement  or at least obtain  the different networks and run them with the same input. this option is of little use to system designers as they need to make a decision before implementation.
　another solution is to provide a general model that unites all the available architectures. one of the first such approaches comes from the developers of chord: in   they proposed a unified api for structured p1p overlays. their work divides a p1p application into tiers  where tier 1 is limited to the basic key-based routing api  kbr ; tier 1 implements abstractions such as dht  multicast or dolr  decentralized object location and routing ; and eventual higher tiers  not discussed there  implement applications on top of the two basic levels. the authors argued that their set of api methods can be easily implemented on four types of structured overlay networks but did not provide further results in that direction. another recent example in this category is . though the authors of  also do not present a real implementation  they take an even more ambitious approach to modeling p1p overlays by considering both structured and unstructured overlays in their work. even without the benefit of an implementation  these works are a motivating exercise  arguing for the case of a unifying framework. the reason for which these two proposals lack an implementation is  we suspect  that they still require a fair amount of programming to launch a new system. moreover  they may be too general to provide real feedback on the features that have a particular beneficial or detrimental effect on the perfomance.
　in parallel to the above systems  works such as that of ratajczak and hellerstein   qu et al.  or gummadi et al.   successfully argue for an analysis of the underlying static structure of the p1p overlays before looking at the algorithms implemented on top of it to deal with load balancing and churn. first   presents an empirical analysis based on the simulations of various types of networks and concludes that routing geometry is fundamental and that flexibility is a key parameter. they also suggest that the ring  here by ring they actually mean the chordal ring graph  i.e.  a ring plus a set of chords connecting different sections of the ring  is a powerful candidate for the universal network  on top of which most routing and balancing algorithms may be implemented. their analysis still lacks a cohesive analytical framework; even in the case of the ring  the results do not take into account that the arrangement of chords of the ring has a significant effect on the graph's properties.
　the empirical results of  call for an analytical study to identify the graph theoretic properties of the networks. such a study was initiated in  and independently extended in . both works identify cayley graphs as the common underlying structure of the most popular p1p overlays. additionally  they suggest the possibility of defining new networks based on so-far unexplored cayley graphs  such as the star graph or the pancake graph. a useful continuation is the implementation of these proposals  and  maybe more importantly  the identification of significant measures to differentiate existing p1p overlays. with regards to this last aspect  they observe that all structured p1p networks are very similar in terms of vertex and edge transitivity  hierarchy  fault tolerance and connectivity  and hamiltonicity. we are thus left with the impression that  for instance  the hypercube  which is substantially similar in all these metrics with the chord ring  has been somehow miss-favored. we will show in this paper that this is not the case.
