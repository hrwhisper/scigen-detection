we define a connection subgraph as a small subgraph of a large graph that best captures the relationship between two nodes. the primary motivation for this work is to provide a paradigm for exploration and knowledge discovery in large social networks graphs. we present a formal definition of this problem  and an ideal solution based on electricity analogues. we then show how to accelerate the computations  to produce approximate  but high-quality connection subgraphs in real time on very large  disk resident  graphs.
　we describe our operational prototype  and we demonstrate results on a social network graph derived from the world wide web. our graph contains 1 million nodes and 1 million edges  and our system still produces quality responses within seconds.
categories and subject descriptors
h.1  database management : database applications data mining
general terms
algorithms  human factors
1. introduction
　suppose we are given a large graph and we are asked to find the relationship between two nodes 'a' and 'b'. for illustration  we shall use a social network as an example of a graph. in the simplest case  the relationship is manifest as an edge in the graph. however  social network graphs are typically sparse  meaning that a vanishing fraction of node pairs actually have an edge between them. nonetheless  they may be related due to a composition of simple edges: 'a' is related to 'x'  and 'x' is related to 'b'. in this case  the relationship might be encapsulated as a path in the graph. in real life  however  the relationship between

 on sabbatical from carnegie-mellon university
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. to copy otherwise  to republish  to post on servers or to redistribute to lists  requires prior specific permission and/or a fee.
kdd'1  august 1  1  seattle  washington  usa.
copyright 1 acm 1-1/1 ...$1.
two people is often multi-faceted; for example  'a' and 'b' might have the same manager and the same dentist. moreover  the paths connecting two people may not be vertexdisjoint; for instance  the dentist may also be the sister of 'a'  or may be dating the sister of 'a'. representing the real-life relationship between two nodes in a graph using a single path is inherently limiting for two reasons: first  any automated mechanism to pick the most important path will make mistakes  and showing a subgraph will increase the probability that the critical path is present; and second  there may not be a critical path  as in the example of two people who have written papers together with a multitude of co-authors  rather than a single co-author. in this paper  we address the problem of extracting from very large graphs  a small  amenable to visual inspection  subgraph that best captures the connections between two nodes of the graph.
　connection subgraphs are useful in many domains. in a social network setting  connection subgraphs will help us identify the few people most likely to have been infected with a disease  or heard a rumor  or information-leak  or joke . they can also help us spot whether an individual has unexpected ties to any members of a list of individuals. in other domains  connection subgraphs will help us summarize the connection between two web sites using the hyper-link graph; or the connection between two proteins in a metabolic network; or between two genes in a regulatory network. more formally  the problem of interest is as follows:
connection subgraph problem
given: an edge-weighted undirected graph g  vertices s and t from g  and an integer budget b
find: a connected subgraph h containing s and t and at most b other vertices1 that maximizes a  goodness  function g h .
　the constraint on b is motivated by limitations on visualization of graphs  e.g.  b ＋ 1 . the function g represents the  goodness  of the solution h. if g is the negative sum of edge weights in h  for instance  then the resulting connection subgraph will be the shortest path from s to t; this is a valid answer  but probably not the most illuminating one. likewise  on the other extreme  if g is the number of edges of h then the connection subgraph will be the densest set of s-t paths; this is again probably not the best answer.
　the connection subgraph problem thus has two subproblems:
sub-problem 1: what function g is an appropriate  goodness  
sub-problem 1: how can the subgraph h maximizing g be found quickly 
in this paper we propose a particular function g  tailored to produce connection subgraphs that capture salient aspects of relationships in social network graphs  though it also applies to graphs arising from other applications . we also propose algorithms to compute the solution on very large graphs.
　our formulation and upcoming solutions are domain independent  but we illustrate our techniques on a specific data set that we believe has a great deal of interest in itself. specifically  we used  named-entity  extraction algorithms to derive a name graph from the world wide web. in this graph  the nodes represent names of people  and there is an edge of weight w between two names if the names appear in close proximity on w different web pages. our data set contains roughly 1 million distinct names  and about 1 million distinct edges  drawn from over 1 million web pages. the  name graph  is a valuable resource  because it can help us find patterns  outliers  and connections. in figure 1 we show three connection subgraphs that were produced by an interactive prototype system  described in section 1  that computes and displays good connection subgraphs in a few seconds.
　although the discussion in this paper focuses on connection sub-graphs between persons  we also envision applying it to graphs that describe relationships between arbitrary pairs of entities  including persons  companies  products  organizations  species  documents  web sites  phone numbers  etc. we expect that connection subgraphs will prove widely useful in interactive data exploration systems.
　the structure of the rest of the paper is as follows. in section 1 we describe some related work  and consider the problem of what constitutes a good objective function g. the details of our approach are presented in sections 1 and 1  with experimental results on the name graph in section 1. we describe the interactive system in section 1  and summarize our conclusions and suggest future directions in section 1.
1. related work
　the heart of this paper is how to find  good  connection subgraphs. to our surprise  we have not found any work that directly addresses this problem in the published literature. there are well studied areas in graph theory and networks that have some overlap on the surface  but none attacks this problem. we review this work next  show why some  reasonable  approaches perform poorly  and we briefly review other related work.
　the two most natural measures for choosing  good  paths would be the shortest distance  and the maximum flow criterion  in which the edge weights represent a maximum flow on the edge. both of these fail to capture a natural notion of  best path  in social networks. consider the graph of figure 1 with unit weights. in this case  the shortest paths from s to t go through nodes 1 and 1  and both have length 1. notice however that node 1 has many edges  as would be the case if the node represented a famous person with many incidental connections. thus  one would intuitively prefer the path through node 1  but this preference is not captured by the traditional shortest path computation. other distance functions in graphs 1  1  match more closely with our intuition of which paths are best for conveying a relationship  but it is important to stress that our measure g prefers subgraphs that contain multiple possibly overlapping paths where possible. our goal is a good subgraph rather than a path or collection of paths.

figure 1: a simple network where both shortest path and network flow fail to adequately model social relationships. with all edges having weight 1  flow fails to distinguish between the paths s 1 t and s 1 t  even though the latter is shorter. total path length fails to distinguish between the paths s 1 t and s 1 t  even though path through 1 is diluted by many extra connections.
　if we instead treat connection subgraph generation as a maximum flow problem  we find that paths s 1 t and s 1 t both carry 1 unit of flow  although we would intuitively prefer the shorter path through node 1  since social relationships tend to blur with distance. thus both shortest paths and network flow models fail to adequately capture the notion of a  good  path in social networks  although both seem related.
　there has been considerable work on community detection  1  1  1 . however  reporting the  community  of two remotely related nodes will force us to far exceed our budget b of allowable edges  and in cases where the two people belong to different communities  we are interested in relationships between their communities.
　the main problem of this paper is also related to previous work on survivable networks  e.g.  see  . there  the objective function g is usually expressed as the count of edge-disjoint or vertex-disjoint paths from the source to the destination. this measure also fails to adequately model social relationships  as the two paths in figure 1 through nodes 1 and 1 have the same survivability: each path 'dies' with the deletion of one node or edge.
　other related work includes the pagerank  and personalized pagerank algorithms  1  1 ; graph clustering  partioning  and matrix reordering  1  1  1  1  1 ; electrical circuits and random walks  1  1  1 ; and influence propagation .  customer value  of a node ; and other topics on sparse graphs  1  1  1  1 .
