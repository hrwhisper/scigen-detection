this paper describes research that characterizes the development of routine behavior based on a model of the historic relation of the agent to his environment. the view developed is that the agent forms a 'habitat' outside of which his performance degrades. routine behavior emerges from the history of the relations between the agent and his habitats in the service of recurring goals. routines are customized to the agent's environment  but so constructed as to support future related activities and the adaptation to new circumstances that extend the agent's range of activity. in this paper we focus on examining quantitatively how this customization reduces the agent's workload. 
introduction 
one characteristic of recent work in the goal directed behavior of agents has been a tightening of the relationship between an agent and his environment. this tighter coupling of agent and environment has taken several forms  including: the development of agents that interface with the world rather than manipulating internal representations  brooks  1 ; the design of special purpose agents for particular goals and environments; and models of agency that rely more on reacting than on planning. 
　the focus of this paper is on two aspects of the relation of agent and environment: the development of routines  and the grounding of routines in habitats. by routine it is meant those activities that are regularly repeated. one advantage of customizing the agent's behavior to his routines is the reduction of planning effort. because some routines regularly occur in the same place  habitats can begin to emerge. the advantage of habitats over other places of operation include: greater skill in focussing on relevant details and the increased accessibility from memory of relevant information at each point of a routine interaction. 
　the mechanism we present will maintain  given a goal  a history of the agent's interactions with a particular kind of artifact  device  within a given habitat. this paper will examine how the history of the relations between a situated agent and his individual environment in the service of his recurring goals result in the development of routine behavior. previous episodes of interaction accumulate in memory  and are segmented and sorted so as to guide the agent in future behavior. with each subsequent activity  the agent further explores and learns about his habitats. this learning magnifies the agent's abilities for the domains and situations with which he is most familiar. thus  for example  at any given point of a routine interaction  occurring at its usual place  retrieval of relevant information from memory can be cued by the features of the external world that in the past have become available to the agent at that point in the interaction. 
the relation of the agent to his environment 
routines. agre  forthcoming  refers to recurring patterns of activity as routines. it is a counting exercise to show that a day is made up of routines: getting up in the morning  driving to work  calling home from the office  loading the dishwasher  brushing one's teeth. for day-to-day routine activities it is more often the case that the circumstances vary slightly than that the goals of the planner have changed. to the 
extent that an agent's activities fit this model  the development of standard routines for those activities will potentially save a great deal of planning effort. 
　our focus will be on the routines which are common practices. we define common practtces as routines  goals  and situations that are common to more than one agent within a given community of agents  scripts  schank & abelson  1  were a method for internally representing common practices. examples of common practices abound: procedures for driving vehicles  riding public transportation  operating a dishwasher  using a library  renting a video  getting change from a change machine  using a vending machine  attending a ballgame. 
　economic forces  technological innovation  social trends or local variations between communities can all be sources of variance in common practice. dealterman and zito-wolf 1 
spite continuous change  because of the shared set of practices from which new practices are created  e.g. minsky  1; schank and abelson  1; rumelhart  
1   there is constancy in the world. the cultural history of practices acts as a background from which new practices are revised into being  cole  1 . as a rational agent operating in such a world  in many cases the ability to function effectively depends on the ability to construct an interpretation  an 'understanding'  of the novel aspects of the current situation in terms of shared concepts of culture  community  home  and workplace. this is a doubly effective strategy because in many cases the world has been arranged  presented  so as to communicate to an agent the action to be taken; the prevalence of instructions is one piece of evidence that this sort of communication is occurring. in our view  the comprehension processes that are at work to build an interpretation of variance in practice are the same that are at work in the reading of a narrative. 
habitats. our dictionary  webster's 1  defines a habitat as  the place where a person or thing is ordinarily found.  likewise  a situated agent performs activities not in arbitrary places  but in those places he frequents. the advantages of this kind of familiarity are nicely summarized by the following advertisement for cannon copiers  cannon will assign you a repairman who not only knows your type of machine but also knows your machine.  
　a given routine in memory will over time come to reflect the details of the habitat s  where that activity is usually performed. an agent does not make ratatouille in some abstract kitchen  but rather in a specific kitchen  and after a while his ability to make ratatouille becomes dependent in part on that particular environment. moreover  one would expect the agent's performance to degrade outside of the agent's habitats. in somebody else's kitchen  such issues as finding the spices  pots  and pans  and divining the idiosyncrasies of the oven  require time and effort. what distinguishes my habitats from other situations is my relation to and use of the features presented by that situation: 
familiarity in a habitat an agent has greater access to the details of the situation. 
focus customizing routines to habitats facilitates the selective noticing of relevant features. 
perceptual effort for non-habitats there are difficulties in locating the relevant details of a situation. 
retrieval accuracy and effort because the agent and his memory is tightly integrated with its habitat the information in memory is more readily accessible. at each step in the performance of a routine within a habitat reminding is facilitated by the cues readily accessible at that point in the interaction. 
　this paper shows how a routine can be used as a framework to organize the relevant features extracted 
1 	distributed al 
from habitats  and how the accumulation of such details in turn enriches and extends the routine. with respect to the discussion above we will empirically test the hypothesis that the accumulation of features associated with a given habitat over time reduces the information-processing load and the amount of active looking on the part of the agent for subsequent routinebased interactions. 
a case-based model of activity 
the floabn system  alterman  zito-wolf  and carpenter 1  is a project exploring a range of issues including  interaction and activity  memory and casebased reasoning  instruction usage  spatial reasoning  and the social and cultural conditions of action. the domain of floabn is the everyday usage of office and household devices such as photocopiers and telephones. floabn acquires and revises routines via adaptation and through the interpretation of instructions and messages read or received during interaction with its environment. 
　the basic functioning of floabn combines casebased reasoning  cbr: kolodner & simpson  1; rissland & ashley  1; hammond  1  and comprehension and is based on the idea of adaptive planning  alterman  1 . the model of adaptive planning is that a situated agent retrieves from memory a case that he adapts as he proceeds with his interaction with the world. these adaptations occur as a result of interpreting the external world. construing the world is an important resource in selecting action  especially in terms of adapting to changes in common practice  where it can directly lead to action. an example of where interpretation is sufficient to select action is in the usage of instruction. 
　the core of floabn is an adaptive planner called scavenger  zito-wolf & alterman 1 . floabn also includes an instruction reader  iimp: 
carpenter fc alterman  1; sprite: carpenter & alterman  1  for processing instructions and other messages received during an activity. floabn interacts with a world defined by a discrete-event simulator. 
t h e representation of routines as history 
in floabn  the agent's memory of previous problemsolving episodes is organized using a multicast}1 the history of previous related episodes of interaction  as organized by the multicase  frames routine interaction  providing both the expectations of how an interaction normally proceeds and background against which events are interpreted. at the same time  the multicase 
1
　　a detailed comparison of multicase to other case-based models of episodic memory can be found in  zito-wolf & 
alterman  1  
1
　　for further details on the multicase  the associated model of episodic memory  and the adaptive planner scavenger  see roland zito-wolfs  1  dissertation casebased representations for procedural knowledge. 
is constituted from cases derived from episodes. that is  each episode has the potential to contribute new components and detail to the history of interactions  a process called the enrichment of the multicase. 
　we define a decision point  dp  as any point in a 
　routine requiring selection among alternatives  such as branch points  projections of events  and parameter bindings. a multicase organizes a set of decision points into a directed graph. 
　each decision point contains the knowledge relevant to making a single decision  represented in terms of cases. a dp specifies the known options at that point  get-copy-card  check-power   associating with each option a set of descriptors of situations in which it is considered appropriate. each descriptor represents one segment of some particular problemsolving episode; it describes that segment of experience by specifying a set of features and value available to the agent at that particular point in the interaction. it is because the descriptors are tied to features of the environment that the routine becomes grounded in the agent's individual world and  over time  habitats can emerge. 
each pair of option and descriptor is called a case. 
a dp may contain multiple cases for each option. to make a decision  the features of the current situation are matched against the descriptors stored with each option. shown below is the dp expressing the fact that the copier may need to be enabled  either by turning power on  upstairs copier  or by inserting a copy card  downstairs copier . 

the descriptor list associated with each alternative lists the values of roles and parameters that are thought to characterize the circumstances under which that alternative is relevant. decision points may be used to conditionalize any feature of any structure in floabn's episodic memory  such as parameter bindings for steps. for example  we associate with the destination role of the goto-copier step the set of copiers which the system has encountered thus far. 
　the decision points serve both to segment and sort the experience of the agent. each decision point collected together all the related segment of episodes. thus in figure 1 the node having to do with lifting the cover of the photocopier has attached to it various differing episodes in the lifetime of the agent regarding lifting photocopier covers. 
　this organization serves several purposes. first  it segments each problem-solving episode into cases that are individually stored and indexed. this facilitates access to relevant parts of episodes for transfer to new situations. second  the descriptors for the episodes both couple the routine to the agent's habitats and dis-

figure 1: decision points collect together related episodes 
tinguish options at decision points. lastly  the saved information allows episodes to be reconstructed from their descriptors. 
routine behavior 
an algorithm for acting using a multicase extends the adaptive planning algorithm described in  aiterman  1 . scavenger acts by selecting from the menu of options provided by the multicase at each step  or other decision  the element most appropriate to the current situation. this is done by selecting the option associated with the most similar previous situation. options are evaluated by comparing their case descriptors to the current situation; the option associated with the best-matched descriptor is selected. since each dp lists only the options relevant at its point in the routine the cost of this process is limited. 
　performance of a step has several parts. first its preconditions are checked and any missing preconditions are repaired adaptively. then the step's actions - its substeps  if any  followed by its  primitive component   a code fragment  - are performed. if a step fails  scavenger will try to adapt; if that fails  it will either press on or propagate the failure to the encompassing routine. the expected duration of steps is monitored; steps that are judged to be overdue are treated as having failed. next  the step's expected outcomes are verified and repaired if necessary. a next step is selected and the cycle repeats. routine performance is complete when performance of the root node completes and its expected outcomes are achieved. 
adaptation methods that are used include observaalterman and zito-wolf 1 
tion of alternatives available in the situation  adaptation of the problematic condition  adaptation of the step  or insertion of additional steps. in general sources of adaptation can involve a grab bag of techniques  such as experimentation  weak-method search  causal analysis  and memory. the current implementation relies on within-category search  adaptation based on relative similarity  subgoaling  instruction interpretation  passive observation  for unexpected events  and active observation  for role filling . overall the primary focus is on the use of comprehension-based adaptations. the value of comprehension is especially clear in floabn's use of instructions  labels  a label on my stereo identifies the volume knob   iconographs  the 1 logo identifying the on/off switch on many copiers   or affordances  the volume knob affords sliding left and right motions  that might be available. another form of comprehension  not currently implemented  would involve copying the actions of some other agent. 
enrichment of routines 
the system begins with a skeleton routine such as an agent might acquire by having the task explained to it or seeing it performed. each additional detail arises from some specific experience. some experiences add new paths  e.g. running out of paper   some add detail to existing paths  e.g. observing lighting and movement as copies are made   and some modify existing steps or decision criteria  e.g.  learning where to look for a power switch . most paths through the multicase access elements contributed by a number of distinct experiences. 
　multicases allow detail to be acquired incrementally through the overlay of old episodes with newer ones  resulting in a gradual enrichment of the multicase. as a given multicase is applied to a new situation scavenger enriches that multicase. whenever a choice is made  the choice  if new  can either result in the addition of a new decision point or it can be added to the list of options for an existing decision point. during the test sequence we show in the empirical section of the paper  1 new decision points are acquired and several hundred options. 
　this constant case acquisition has two important effects: performance requires less effort over time  and the routine becomes customized to the details of specific habitats. by  becoming a routine  we mean that one's increased familiarity with a given habitat reduces certain specific costs  e.g.  effort and time  of the activity; in the next section we will describe specific quantitative consequences of this process. once the telephone-call multicase is extended to include inserting a dime in a pay phone  that modification does not need to be made again  nor will it be necessary to spend time receiving and interpreting messages about inserting a coin. once the office copier is identified  it is remembered as an individual and  in the future  
1 	distributed al 
effort spent in identifying it is virtually eliminated. 
　an example of this customization to the normal places of engagement is found in the telephone domain. we find that as time goes on we differentiate habitats by place-relevant properties. for example  we learn that the phone in an office is usually on the desk  wherever that may be  except perhaps in roy's office  where its often fallen on the floor or buried under paper. we learn that if you need a phone number in rick's office  you check the wall. pay-phones are found in halls rather than in offices. there can be no  axioms of phones  that state these facts  for they are merely regularities of the agent's experience. nevertheless  they are reliable within the agent's habitats and form a rational basis for behavior. 
quantifying routine behavior 
we examined the evolution of routine behavior over a span of episodes by presenting floabn with a sequence of examples including telephoning  copying  and vending machine transactions and observing the evolution of each multicase in response. floabn was provided initially with three skeleton multicases  one for each type of task. it was then presented with a 
sequence containing 1 different situations of the three types  plus 1 variant situations  one of each of the first 1 situations   plus 1 repetitions of some prior scenario  e.g.  calling home from the office  for a total of 1 episodes. there were on average 1 steps per episode  yielding in excess of 1 episodic cases. each run of the example sequence required approximately 1 hours on an 1mbyte macintosh iix under allegro common lisp. for each episode we collected over 1 items of data about the evolution of memory and routine performance  including such items as the size and composition of decision points  the composition of plan memory  information usage and flow  and dynamic information on the evolution of routine structure.1 here we examine the change in three measures of effort involved in activity across the example sequence: the number of features observed  the amount of searching required  and overall workload. 
feature extraction effort. earlier we discussed characteristics of of habitat-based activity. one difference was in the number of situation features to which the agent had to attend. in non-routine situations the agent has to expend effort determining the values of the significant features of the situation and sorting through irrelevant features  having less experience to focus his search. in his habitats  however  the agent already knows the values of many of the important features  and has a good idea of where to look for what he does not know. figure 1 shows the number of features 
　　1 this paper focuses on the measures of information flow. memory usage and decision effort are discussed briefly; more detail can be found in zito-wolf & alterman  1 . attended to by floabn during each episode. this measure counts all features - object existence  object properties  and object relations - floabn accessed from the situation  as opposed to from memory  in the course of activity. we expect this number to be reduced by routinization because as floabn becomes familiar with a situation   1  relevant situation features are more likely to be available in memory; and  1  the number of features needing to be examined at all is reduced because fewer judgements need to be made and attention is better focused. there is indeed a clear reduction in attentive effort. 
active looking for particular objects. we measured the amount of active looking that floabn does in a given situation  that is  the number of times floabn had to attend to some specific object. such attending generally occurs in the process of locating a suitable object to fill some plan role  such as copier  coin-slot  or phone. this correlates somewhat with the number of features attended  since object location is typically followed by feature examination to determine how well it matches the desired object or ob-
ject type. however  it differs in that object searching is a measure of how many times the agent had to select and discriminate objects rather than a count of the features extracted from a situation. an object attended in two different searches is counted twice. the familiarity afforded by habitats helps reduce the amount of active looking in the course of an activity  figure 1 . 
agent workload. to measure the overall change in effort expended in performing a task in a given situation due to routinization  we created a general measure of workload that combines effort of several types. in addition to the above measures of features extracted and active looking  this measure takes into account the number of steps performed and the number of adaptations made. these different components have been weighted to reflect differences in the mental effort they require: 

　feature storage is more expensive than attending a feature because storage in floabn involves first attending to a feature and then either building a new dp or modifying an existing one. active looking involves both attending and storage of features  and it also has the additional costs of visual search. finally  adaptation typically involves a significantly larger amount of cognitive effort than the performance of a single step because  at a minimum  it involves state-space search and evaluation. we feel that this latter number is fairly conservative as some adaptations can be fairly lengthy  involving time consuming processes like experimentation and the interpretation of instructions. the results are given in figure 1. routinization of behavior clearly reduces the workload  and the reduced slope of the graph toward the right shows that this difference is increasing as the situations of activity become more and more routine. 
discussion. our results suggest that adapting to one's habitats is effective in reducing agent effort in several distinct ways: active looking  features examined  memory load  and plan modification  adaptation  effort. intuitively it is reasonable that familiarity with a situation and an activity reduces the effort of performing that activity. however  the study of skill acquisition in artificial intelligence and cognitive science has typically focused on the role of internal transformations of knowledge  e.g.  proceduralization in act  anderson  1  and chunking in soar  and has largely ignored the effects of improvements in the coupling of the agent with his environment. in our view  skill acquisition is a phenomenon arising from several sources. act and soar have demonstrated that power law behavior can result from the mental transformations of knowledge such as proceduralization and chunking; agre and shrager  1  have shown that power-law behavior can arise from the accumulation of local optimizations to an activity. our work shows that similar performance improvements can arise from improving the fit between the agent and his world. 
summary and conclusions 
the research described in this paper has explored the relation of agent and environment under four conditions: 1  an individual agent is part of a community of agents; 1  individual agents have routines; 1  routines are grounded in the habitats of the individual agent; 1  some of these routines are common practices. under these assumptions  we have shown how the enrichment of routines with details of the agent's habitats acquired through problem-solving experience can reduce both problem-solving and perceptual effort. 
