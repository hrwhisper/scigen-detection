searching for medical information on the web has become highly popular  but it remains a challenging task because searchers are often uncertain about their exact medical situations and unfamiliar with medical terminology. to address this challenge  we have built an intelligent medical web search engine called imed  which uses medical knowledge and an interactive questionnaire to help searchers form queries. this paper focuses on imed's iterative search advisor  which integrates medical and linguistic knowledge to help searchers improve search results iteratively. such an iterative process is common for general web search  and especially crucial for medical web search  because searchers often miss desired search results due to their limited medical knowledge and the task's inherent difficulty. imed's iterative search advisor helps the searcher in several ways. first  relevant symptoms and signs are automatically suggested based on the searcher's description of his situation. second  instead of taking for granted the searcher's answers to the questions  imed ranks and recommends alternative answers according to their likelihoods of being the correct answers. third  related mesh medical phrases are suggested to help the searcher refine his situation description. we demonstrate the effectiveness of imed's iterative search advisor by evaluating it using real medical case records and usmle medical exam questions. 
 
categories and subject descriptors  
h.1  information search and retrieval : search process  selection process 
general terms: algorithms  experimentation  human factors 
keywords: medical knowledge  medical query  intelligent medical 
web search engine  iterative search process  language model 
 
1. introduction 
　as the healthcare industry is moving toward a more consumercentric focus  searching for medical information on the web has high cholesterol and wants to learn about appropriate diet for himself. however  in many cases  the medical information searcher is uncertain about the problem he is facing and unaware of the related medical terminology  e.g.  panophthalmitis . as a result  it is often difficult for him to choose a few accurate medical phrases as a starting point for his search. 
　to address this problem  we have built a prototype intelligent medical search engine called imed   which uses medical knowledge and an interactive questionnaire to help searchers form queries. below we first give a brief overview of imed  and then focus on imed's iterative search advisor  which integrates medical and linguistic knowledge to help searchers improve search results through iterative search. 
　iterative search is fundamental to medical search because of medical problems' inherent fuzziness  which often makes it difficult even for medical professionals to distinguish between right and wrong choices. as reported by gonz│lez-gonz│lez et al.   partly due to the difficulty of identifying appropriate keywords that can clearly describe the medical situation  it takes a physician on average 1 minutes to search for answers to a clinical question and the success rate is only about 1%. for ordinary internet users with little medical knowledge  we expect their medical search performance to be even worse. 
 
1 overview of imed 
　imed leverages its built-in medical knowledge in the form of diagnostic decision trees written by medical professionals . as shown in figure 1  each diagnostic decision tree corresponds to either a subjective symptom  e.g.  fatigue  or an objective sign  e.g.  hypertension . each non-leaf  non-root node of a diagnostic decision tree corresponds to an answer to a question that imed can ask. each medical phrase in the leaf node of a diagnostic decision tree  possibly in combination with the searcher's other keyword inputs  can become a query that imed uses. 
	 	chronic recurrent abdominal painirritable bowel syndromebecome highly popular. on an average day  1% of american family history of  no family history of internet users perform medical search  to better prepare for epilepsy or migraine  epilepsy or migraine doctors' appointments and to better digest information obtained  from doctors afterwards. due to the increasing lack of new doctors   the interaction time between doctors and patients keeps shrinking   and this trend is expected to last in the foreseeable near future.  
　since october 1  several medical web search engines have  been launched  including healthline   google health   
searchmedica  and medstory . they use the traditional keyword  query interface  which works well when the searcher clearly knows  his medical situation. for instance  a searcher knows that he has  
 	 
permission to make digital or hard copies of all or part of this work for ... ... personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies 
bear this notice and the full citation on the first page. to copy otherwise  or republish  to post on servers or to redistribute to lists  requires prior specific permission and/or a fee. 
sigir'1  july 1  1  singapore. 
copyright 1 acm  1-1-1/1...$1. figure 1. the diagnostic decision tree for the symptom 
 chronic recurrent abdominal pain.  
 　
　imed uses diagnostic decision trees to help the searcher form queries. the searcher first selects one or more symptoms and signs from a list of known symptoms and signs . this list covers most chief complaints with which physicians are confronted. then imed asks questions related to these selected symptoms and signs. based on the searcher's answers to the questions  imed navigates the corresponding diagnostic decision trees and automatically forms multiple queries. each query is used to retrieve some related web pages. imed's search results include the web pages retrieved for all these queries. 
　for example  figure 1 shows the diagnostic decision tree in collins  for the symptom  chronic recurrent abdominal pain.  if  chronic recurrent abdominal pain  is the only symptom chosen by the searcher  imed's first question is  is there a family history of epilepsy or migraine   if the searcher answers  no  to this question  imed's next question is  is the pain colicky or persistent   if the searcher answers  colicky  to the second question  imed continues to ask  what is the location of the pain   if the searcher's answer to the third question is  mid-abdominal   imed forms multiple queries including partial intestinal obstruction.  medical phrases in the nonselected leaf nodes of the diagnostic decision tree also form queries  but with lower weights. see luo  for details.  
 
1 iterative search advisor 
　we studied how users interact with an intelligent medical search engine that leverages built-in medical knowledge  and observed significant improvement over general web search engines. however  we also observed that searchers still frequently miss desired information due to several reasons: 
 1  in a typical medical case  the patient often has multiple symptoms and signs. the searcher frequently could not nail down the correct chief complaint  i.e.  the most important symptom or sign   which is a task that usually requires rigorous medical training and lots of hands-on experience. as a result  the searcher started with some inappropriate symptoms and signs  whose corresponding diagnostic decision trees do not cover the patient's disease. 
 1  even if the searcher started with the right symptoms and signs  he sometimes provided improper answers to questions asked by the search engine due to misunderstanding of the questions and his medical situation. this leads to irrelevant search results.  
 1  when the searcher could not find desired search results in a single pass  he usually resorted to iterative search. after reading the returned search results  the searcher might realize his inappropriate choices  correct them  and redo the search. however  a frequently occurring scenario is that the searcher could not realize the inappropriate choices he has made and was stuck there. 
　in response to these challenges  we recently developed an iterative search advisor  isa  in imed  which automatically suggests symptoms and signs and recommends alternative answers to the questions. such functionalities are highly desired by both ordinary internet users and medical professionals . 
　in imed  whenever the searcher needs help  he inputs a description of his medical situation into the isa. imed then does three things in response. first  imed sorts all the symptoms and signs in its knowledge base in descending order of their relevance to the searcher's situation description  and suggests the top ranked symptoms and signs to the searcher. second  for all the questions asked by imed  alternative answers that are not selected by the searcher are ranked according to their likelihoods of being the correct answers and recommended to the searcher. third  considering that the searcher often cannot accurately describe his medical situation in a single pass  imed suggests related medical phrases in the mesh medical ontology  to help the searcher refine his situation description. all these medical phrases are ordered by their relevance to the searcher's situation. during an iterative search  the above three features help the searcher select different symptoms and signs  provide alternative answers to the questions asked by imed  and revise his situation description. whenever the searcher's situation description is modified  the suggestions provided by imed's isa may also change. 
　in essence  our iterative search method combines automatic text analysis with human intelligence to cope with the inherent difficulty of the medical search problem and the limitations of existing natural language processing techniques. imed provides useful suggestions to the searcher while the suggestions can be imperfect. we ask the searcher to use his intelligence to filter out inappropriate suggestions. this suggestion process repeats until the searcher finds his desired information  and human intelligence is involved in every iteration of this process. 
 
1 technical challenges and our solutions 
　the fundamental challenge in building imed's isa is to construct a statistical model for the iterative search task that can seamlessly integrate information from natural language text description with information from the diagnostic decision trees. we combine the language modeling method  with several novel techniques to address this challenge. more specifically  we address the following problems. 
　first  when suggesting symptoms/signs and recommending medical phrases related to the searcher's situation  there is a vocabulary mismatch between the medical phrases and the searcher's situation description in layman terms. to address this problem  we use the representative page technique  1  1  to  translate  each such phrase into multiple representative web pages. the searcher's situation description is matched with the representative web pages instead of with the original medical phrases. 
　second  when ranking alternative answers to the questions  there is another vocabulary mismatch between the alternative answers and the searcher's situation description in layman terms. this problem cannot be solved by directly using the representative page technique for the alternative answers. this is because many answers to the questions are about the absence of certain symptoms  such as  little or no sputum  and  no fever.  existing keyword matching techniques cannot retrieve appropriate representative web pages for these answers. instead  we exploit the semantics of diagnostic decision trees to obtain an indirect representation of the alternative answers to the questions. recall that each answer a to a question q corresponds to a non-leaf  non-root node na in a diagnostic decision tree t. all the diseases in t's leaf nodes that are na's descendants form an indirect representation of a. we use the indirect representations of the alternative answers  instead of the alternative answers themselves  to obtain representative web pages. we then match these pages with the searcher's situation description. 
　we crawled a large number of medical web pages from the internet and evaluated the effectiveness of our techniques using both real medical case records and real medical exam questions. our results show that imed's isa significantly improves user satisfaction. many suggestions are useful and can facilitate searchers to quickly find their desired information. 
　the rest of the paper is organized as follows. section 1 shows two medical case examples. section 1 describes the user interface of imed's new isa. section 1 presents our techniques for making suggestions. section 1 evaluates the effectiveness of our techniques. 
 
1. medical case examples 
　in this section  we present two example medical case records from the family medicine online database  to give the reader a feeling of real medical cases. some searchers failed to use imed to find desired information for these two medical cases. 
 
example 1 
　figure 1 shows the first example medical case record  whose correct diagnosis is irritable bowel syndrome  ibs . as can be seen in figure 1  the correct diagnosis ibs can only be found by answering  persistent  to the question q   is the pain colicky or persistent  . when using imed  some users did not know the word  colicky  and consulted the explanation that imed provided for q   a colicky pain is a gradual onset of pain that increases in a crescendo fashion until it reaches a peak of severity and then slowly subsides. according to the medical record  the patient's pain is intermittent. some users treated intermittent as colicky rather than persistent  and hence answered  colicky  to q. consequently  they found the disease  partial intestinal obstruction  but missed the correct diagnosis ibs  which is ranked rather low in the returned search results. 
 
a 1-year-old white female presents to your outpatient office with complaints of abdominal pain. her pain is intermittent and accompanied  by bouts of diarrhea. between bouts of pain with diarrhea  which  predominate  she is constipated with small hard stools. she describes the  pain as crampy without localization. she has not lost or gained weight  but constantly feels bloated. dairy products and caffeine exacerbate her  
 diarrheal symptoms. her diet includes limited fiber intake. 
　　figure 1. a first example medical case record  www.hmc.psu.edu/ume/fcmonline/case1/index.htm . 
 
example 1 
　figure 1 shows the second example medical case record  whose correct diagnosis is endometriosis. according to the medical record  the patient's chief complaint is vaginal bleeding. when using imed  some users chose the symptom  metrorrhagia   which means uterine bleeding at irregular intervals  particularly between the expected menstrual periods. however  endometriosis is not in the diagnostic decision tree for the symptom  metrorrhagia  . therefore  those users could not find this correct diagnosis. in fact  endometriosis is in the diagnostic decision tree for the symptom  dyspareunia   which means having difficulty during sexual intercourse. dyspareunia matches with the patient's situation of having lower abdominal cramping and pain with deep pelvic thrusts during intercourse. if a user chooses this symptom  he is likely to find the correct diagnosis. 
 ms. landry is a 1-year-old caucasian female. she complains of a threemonth history of intermittent vaginal bleeding throughout her menstrual  cycle that is increased during menstrual periods. during this same period   she notes lower abdominal cramping and pain with deep pelvic thrusts  during intercourse. she admits to having occasional post-coital bleeding.  she denies any abnormal vaginal discharges  nausea  appetite changes  or 
 
breast tenderness. she also denies increased frequency  urgency  or 
 
changes in bowel habits. she denies weight loss  excessive exercise  or increased stress. her menstrual periods typically last four days but  recently they have persisted for as long as two weeks. she notes mild to  moderate dysmenorrhea although not every cycle. she has had no known  
 pregnancies but has used various methods of contraception in the past.
　figure 1. a second example medical case record  www.hmc.psu.edu/ume/fcmonline/case1/index.htm . 
 
1. user interface 
　imed's novel user interface is an important contribution of the overall work. in imed  the medical information searcher performs search through a questionnaire-based interface. he selects symptoms and signs  answers questions asked by imed  and then obtains search result pages. whenever the searcher cannot find desired information and needs help  he can click a button appearing on each page provided by imed and invokes imed's isa. the searcher can invoke the advisor at the very beginning of the search process if he does not even know which symptoms and signs to begin with. 
 your selected symptom s  and sign s  
	 g chronic recurrent abdominal pain	submit 
alternative symptoms and signs  
   focal abdominal swelling  
   generalized abdominal swelling  
  rectal bleeding 
   rectal pain 
   vulval vaginal ulcerations 
   vulval vaginal mass 
...  
 your previous answers to the questions  
	 	submit
	 	chronic recurrent abdominal pain

alte 	rnative answers to the questions
1. is the pain colicky or persistent  ; persistent
1. what is the location of the pain  ; flank  may be radiating to testicle 
1. what is the location of the pain  ; right upper  	quadrant radiating to shoulder  
1. is there a family history of epilepsy or migraine  ; yes  
 your situation description  	submit
intermittent abdominal pain crampy diarrhea constipation  related medical phrases  
 	dyspepsia
torsades de pointes  
 	cutaneous fistula  
 	vaginal fistula 
 	postoperative complications 
... figure 1. the output interface of imed's iterative search advisor. 
 
　imed's isa has an input interface and an output interface. the input interface is a multi-line text area. the searcher inputs a description of his medical situation into this text area and clicks the submit button. imed then makes suggestions on three aspects:  1  symptoms and signs   1  alternative answers to the questions  and  1  related medical phrases for refining this situation description. accordingly  the output interface shown in figure 1 is divided into three segments  one for each aspect. as in medstory   for each suggestion g imed makes in a segment s  there is a corresponding horizontal bar reflecting g's strength. the length of the bar is proportional to max{cs + ln p g   1}  where cs is a constant specific 
to s  and p g  is the estimated probability that g is related to the searcher's situation. the computation formulas of p g 's are described in section 1. the searcher can invoke imed's isa repeatedly. in each iteration  he works in only one of the three segments and clicks the corresponding submit button there  while any changes made in one segment can affect the contents in the other two segments. 
 
1 symptom and sign segment 
　the first segment of the output interface is dedicated to symptoms and signs. those symptoms and signs chosen by the searcher are shown at the beginning of this segment. all the other symptoms and signs covered in the questionnaire are sorted in descending order of their relevance to the searcher's situation description. the top ns=1  the subscript s stands for symptom/sign  symptoms and signs are listed in the first segment under the title  alternative symptoms and signs.  when the searcher moves the mouse to a symptom or sign s whose name is unfamiliar to ordinary users  the annotation of s in layman terms is displayed automatically. for example  the symptom  hemoptysis  is annotated with  coughing up blood.  this helps the searcher understand these suggested symptoms and signs. the searcher can drop the previously chosen symptoms and signs  and/or add the symptoms and signs suggested by imed. after the searcher clicks the submit button in the first segment  imed will redo the search by asking questions and returning result pages. in a subsequent run  if a question q has been asked before  imed will reuse the searcher's previous answer to q without asking q again. 
 
1 question answer segment 
　the second segment of the output interface is devoted to answers to the questions asked by imed. in general  the search process is performed iteratively. in each iteration  the searcher can revise his answers to some old questions that imed asked in previous iterations. in addition  the searcher can answer new questions that imed has not asked before. essentially  imed guides the searcher to navigate the diagnostic decision trees. the more iterations the search process has been performed  the more branches the searcher has visited in the diagnostic decision trees. it is desirable to show the searcher succinctly both the branches that he has visited and the branches that he has not visited. this helps the searcher avoid either unnecessarily visiting the same branch multiple times or forgetting visiting some important branches. on the other hand  it is undesirable to overwhelm the searcher with too much information. for example  after a few iterations of the search process  the searcher has provided many answers to the questions asked by imed. in this case  imed should not display these  many  answers to the searcher literally  e.g.  one answer in a separate line. to strike a proper balance  we design a novel user interface called questionanswer trees. 
　one naive user interface is to display the selected diagnostic decision trees and to mark the searcher's answers to the questions directly on them. however  the entire diagnostic decision tree ts for a symptom or sign s can be too complex and contain much information that is unnecessary to the searcher. instead  we use a question-answer tree bs that contains only the most essential portion of a modified version of ts  i.e.  the searcher's answers to the questions related to s and the corresponding alternative answers. more specifically  for each symptom or sign s chosen by the searcher  a corresponding question-answer tree bs is displayed at the beginning of the second segment of the output interface. s is shown at the top of bs in italics so that the searcher can easily see which question-answer tree corresponds to which symptom or sign. for all the symptoms and signs chosen by the searcher  their corresponding question-answer trees are displayed shoulder-to-shoulder.  
　in a question-answer tree bs  the non-leaf nodes correspond to all the questions cq that are related to s and imed has asked in the past. the solid-line edges correspond to all the answers that the searcher has provided to the questions in cq in the past. for those edges corresponding to the answers that the searcher selected in the latest iteration  i.e.  the searcher's current selections  their solid lines are thicker than the solid lines for the other edges. the dotted-line edges correspond to all the alternative answers that the searcher has not selected for the questions in cq. in general  a question can have more than two candidate answers and hence multiple alternative answers can exist for the same question. in the case that the searcher chose to provide no answer to a question q in cq  all the candidate answers to q are treated as alternative answers. each dotted-line edge is connected to a leaf node  which is shown as a dotted circle with an embedded number. this number is the sequence number that the corresponding alternative answer a is ranked among all the alternative answers according to their likelihoods of being the correct answers. as shown in figure 1  a is listed under the title  alternative answers to the questions  with an accompanying horizontal bar  whose length reflects the strength of suggesting a. the searcher can use this sequence number to find the corresponding information easily. 
　for example  consider the symptom  chronic recurrent abdominal pain  and its associated diagnostic decision tree in figure 1. suppose in the first iteration of the search process  the searcher provides the question answers that are mentioned in the paragraph before figure 1. then the corresponding question-answer tree is shown in figure 1. in the second iteration of the search process  suppose the searcher answers  persistent  to the question  is the pain colicky or persistent   and answers  not localized  to the question  what is the location of the pain  . then the corresponding question-answer tree is shown in figure 1. 
 	is the pain colicky 
figure 1. the question-answer tree displayed after the second iteration of the search process. 
 
　for all the alternative answers  imed ranks them according to their likelihoods of being the correct answers and lists them in the second segment of the output interface under the title  alternative answers to the questions.  the alternative answers for the same symptom or sign are shown in the same color  while the alternative answers for various symptoms and signs are shown in different colors. for each symptom or sign  the searcher can select at most one appropriate alternative answer.  the searcher can also choose answers by clicking the corresponding circles in the questionanswer trees.  after the searcher clicks the submit button in the second segment of the output interface  imed will revise the searcher's answers to the questions accordingly and redo the search. for example  consider the question q in figure 1   is the pain colicky or persistent  . the searcher answered  colicky  to q in the first iteration of the search process and answered  persistent  to q in the second iteration. if the searcher selects the fifth alternative answer in figure 1 in the third iteration  imed will automatically think that the searcher answers  colicky  to q and answers  right upper quadrant radiating to shoulder  to the question  what is the location of the pain  . 
　in general  for any symptom or sign s  a dominance relationship can exist among its alternative answers. specifically  in the question-answer tree bs for s  consider two alternative answers a1 and a1 whose corresponding questions reside in the non-leaf nodes n1 and n1  respectively. if n1 is a descendant of n1  then a1 is dominated by a1. note that the answer to a question q can affect the subsequent navigation path in the corresponding diagnostic decision tree and all the related questions that imed will ask after q. consequently  in the second segment of the output interface  if the searcher feels that he has made inappropriate choices in answering multiple questions related to s and the corresponding several alternative answers da all look reasonable to him  he is advised to choose an appropriate one in da that is not dominated by any other one in da. for example  consider the six alternative answers in figure 1. the first five alternative answers are dominated by the sixth alternative answer. thus  if the searcher feels that both the second and the sixth alternative answers look reasonable to him  he should choose the sixth alternative answer. 
 
1 medical phrase segment 
　the third segment of the output interface is devoted to related medical phrases. to help the searcher refine his situation description  imed uses the medical subject headings  mesh  ontology   a standard vocabulary edited by the national library of medicine and widely used for indexing and cataloging biomedical and healthrelated documents. the mesh ontology is organized into a tree structure  whose branches correspond to different categories of medical phrases. imed's isa uses the medical phrases in the branches of the mesh tree that correspond to categories c1  pathological conditions  signs  and symptoms  and f1.1  behavioral symptoms   as those phrases are most useful for refining the searcher's situation description. moreover  those medical phrases include relatively minor conditions and are more comprehensive than the symptoms and signs covered in the questionnaire. since each condition usually accompanies with some chief complaint that is one of the symptoms and signs covered in the questionnaire  no separate diagnostic decision trees are needed for these conditions  while these conditions are still useful for describing the searcher's situation. 
　the searcher's situation description is displayed at the beginning of the third segment of the output interface  see figure 1 . following that  under the title  related medical phrases  are np=1  the subscript p stands for phrase  medical phrases from the mesh ontology. none of these medical phrases has appeared in the searcher's latest situation description. all these medical phrases are ordered by their relevance to the searcher's situation. when the searcher moves the mouse to a medical phrase m  the explanation of m that comes from the annotation field in the mesh ontology is automatically displayed. this helps the searcher understand these suggested medical phrases. the searcher can use these phrases to refine his situation description displayed at the beginning of the third segment. after rewriting his situation description  the searcher can click the submit button in the third segment and re-invoke imed's isa. with an improved situation description  it is likely that imed will make more accurate suggestions. 
 
1. algorithms for making suggestions  
　given a medical situation description  imed makes suggestions to the searcher in three ways: 
 1  suggesting relevant symptoms and signs. 
 1  ranking alternative answers to the questions. 
 1  recommending related mesh medical phrases. below  we first provide some related background  and then present the details of our algorithm for each of the three functions above. 
 
1 background on language modeling 
　language modeling  with dirichlet smoothing  is a stateof-the-art method for ranking documents. due to its superior performance and solid mathematical foundation  this method attracts much attention in recent years. we extend it to make suggestions in imed's isa.  
　assuming that all the documents in a collection c have the same prior probability of being relevant to a query q  the language modeling method with dirichlet smoothing uses the following formulas to compute the conditional probability of a document r（c given q: 
p r | q  = p q | r p r  / p q  『 p q | r  = ’q（q p q | r    
  	p q | r  =  c q  r  +u〜c q  c  / | c | / | r | +u  .  
here  c q  r  is query term q's frequency in r  c q  c  is q's frequency in c  |r| is the length of r in the number of terms  and |c| is the length of c in the number of terms. u is a predetermined constant. typically  as suggested in zhai and lafferty   1＋u ＋1. the first formula uses bayes' rule and assumes that all the query terms are independent of each other given r. the second formula uses a dirichlet prior to avoid having zero probabilities. in imed  we use p q | r  as the building block for make suggestions. 
 
1 suggesting symptoms and signs 
　imed's questionnaire currently covers 1 symptoms and signs. for all the symptoms and signs that are covered in the questionnaire but not selected by the searcher  imed sorts them in descending order of their relevance to the searcher's situation description de and suggests the top ns=1 ones to the searcher. the key step here is to compute p s | de     the conditional probability that a symptom or sign s is relevant to the searcher's situation given de. according to bayes' rule:  p s | de  =p de | s  p s  / p de  『p de | s  p s  . 
　we first discuss how to compute the conditional probability p de | s    i.e.  if a searcher has symptom or sign s  how likely he will write de as his situation description. we cannot directly compute p de | s  due to the vocabulary mismatch between the symptoms/signs in medical terminology and the searcher's situation description de in layman terms. even if some symptom or sign s matches with de semantically  it is not uncommon that s does not appear in de. to address this problem  we use the representative page technique in  1  1  to  translate  each symptom or sign into multiple representative web pages. de is matched with these representative web pages instead of directly with the symptoms and signs. specifically  we have a predetermined constant r. for each symptom or sign s  we retrieve the top-ranked r web pages ri  1 ＋ i ＋ r   in the collection c of crawled web pages and use them as the representative web pages of s. to reduce noise  we keep in each ri  1 ＋ i ＋ r   only those terms that appear close to 
s in the document text and have the largest tf〜idf values. the representative web pages for each symptom or sign are preprocessed offline and can be retrieved easily during a search. the conditional probability p de | s  is estimated using a weighted geometric mean of the conditional probabilities p de | ri    1 ＋ i ＋ r  :  
	p de | s   de | ri  wi  1/‘ir=1wi . 	 1  
here  we use the symbol  ○  in  1  to emphasize that our estimation is an approximation under certain assumptions. we do not use the symbol  =  because p de | s  cannot be proven to be equal to the right side of  1 . the weight for ri is wi =1/i 
 1 ＋ i ＋ r  . it is a decreasing function of i and reflects the fact that higher-ranked web pages are generally more important than lowerranked ones. p de | ri   is computed using the language modeling method described in section 1. 
　next  we describe how to compute the prior probability p s  that a symptom or sign s is relevant to the searcher's situation. in general  for each s  the following two kinds of information are useful for estimating p s . first  from imed's log of user search sessions  we can compute the probability p1 s  that a searcher will select s. second  p s  is related to the diseases that have s. recall that s has a corresponding diagnostic decision tree t. all the diseases es mentioned in the leaf nodes of t have s.  note that the leaf nodes of t can contain other medical phrases such as tests .  for each disease d（es  its incidence rate r d  is the number of new cases per 1 people per year and reflects the probability of developing d . information about disease incidence rates is available from many sources  e.g.  the us centers for disease control and prevention  and the wrongdiagnosis web site . we can compute the probability p1 s  that a person will have s using the sum of the incidence rates of all the diseases having s: p1 s 『‘d（es r d . 
in imed  we estimate the probability p s  using a weighted sum of p1 s  and p1 s : p s ○v〜p1 s + 1 v 〜 p1 s    1  
where v is a predetermined constant. here  we use the symbol  ○  in  1  to emphasize that our estimation is an approximation under certain assumptions. neither p1 s  nor p1 s  is equal to p s : 
 1  p1 s  is the probability that a searcher will select s. the searcher may not select s correctly.  
 1  p1 s  is the probability that a person will have s. not all the people with s will use imed. moreover  the proportion of people that have a symptom or sign and will use imed varies for different symptoms and signs. 
 
1 ranking alternative answers 
　consider the questions asked by imed. for all the alternative answers to these questions that were not previously selected by the searcher  imed ranks and suggests them according to their likelihoods of being the correct answers. the challenge is to compute p a| de    the conditional probability that an alternative answer a is the correct answer given the searcher's situation description de. 
　at a first thought  one might want to compute p a| de  using a method similar to that in section 1. the procedure is as follows. according to bayes' rule:  p a | de  = p de | a  p a  / p de  『 p de | a p a  . 
one first attempts to compute the conditional probability p de | a    i.e.  if alternative answer a is the correct answer  how likely the searcher will write de as his situation description. again  p de | a  cannot be directly computed due to the vocabulary mismatch between a and the searcher's situation description de in layman terms. moreover  the representative web pages of a often cannot be obtained directly. for example  many alternative answers are about the absence of certain symptoms. a web page describing a disease that does not have symptom s can either mention the absence of s in many different ways or do not mention s at all. consequently  existing keyword matching techniques cannot retrieve appropriate representative web pages for these answers. without representative pages  it is rather difficult to compute p de | a  . hence  one cannot easily compute p a| de  using p de | a  . 
　to address this problem  we exploit the semantics of diagnostic decision trees to obtain an indirect representation of each alternative answer a and then use it to compute the conditional probability p a| de  . essentially  we build a statistical model that seamlessly integrates the information from natural language text description with the information from the diagnostic decision trees. a similar problem is frequently encountered in ontology-based information retrieval while no good solution exists. 

 	alternative answers
figure 1. an illustration of the searcher's selected answers vs. 
the alternative answers in a diagnostic decision tree. 
 
　our concrete method is as follows. according to the definition of conditional probability   p a | de  = p a  de  / p de  『 p a  de . 
as illustrated in figure 1  each alternative answer a to a question q corresponds to a non-leaf  non-root node na in a diagnostic decision tree t. all the diseases ea in t's leaf nodes that are na's descendants form an indirect representation of a. in the case that a is the correct answer and the information in t is complete  the searcher can only have diseases in the set ea. suppose the searcher does not have multiple diseases at the same time. then event a is the same as the union of all the events d  d（ea . that is  a =  d（ea d . note that a is interpreted as both an event and an alternative answer. similarly  d is interpreted as both an event and a disease. consequently   p a  de  = ‘d（ea p d  de  = ‘d（ea p de | d p d  . 
the conditional probability p de | d  can be computed using the representative page technique described in section 1  as disease d is a medical phrase and its representative web pages can be obtained easily . the remaining problem is to compute the probability p d  that a searcher who correctly selects the symptom or sign associated with t will have disease d. 
　not all the people with disease d will use imed. also  the proportion of people that have a disease and will use imed varies for different diseases. hence  p d  is generally not proportional to the incidence rate r d  of d. we exploit the fact that d is contained in a leaf node nd of the diagnostic decision tree t and estimate p d  in two steps. first  from imed's log of user search sessions  we can compute the probability p nd  that a searcher will select nd. 
second  nd generally contains multiple diseases d1  d1  ...  and dk  where d is one of them. we assume that each disease di  1 ＋ i ＋ k   obtains its share of p nd  in proportion to its incidence rate r di . 
then we estimate p d  as 
	p d  ○ p . 	 	 1  
here  we use the symbol  ○  in  1  to emphasize that our estimation is an approximation under certain assumptions. 
 
1 recommending related medical phrases 
　imed's isa only recommends the medical phrases in the branches of the mesh tree that correspond to categories c1 and f1.1. as mentioned in section 1  these mesh phrases are most useful for refining the searcher's situation description. for all those mesh phrases that are not in the searcher's situation description de  imed sorts them in descending order of their relevance to the searcher's situation and recommends the top np=1 ones to the searcher. the key step here is to compute p m | de    the conditional probability that a mesh phrase m is related to the searcher's situation given de. assuming that all mesh phrases have the same prior probability of being relevant to the searcher's situation  bayes' rule shows that:  p m | de  = p de | m  p m   / p de  『 p de | m  . 
the conditional probability p de | m   can be computed using the representative page technique described in section 1  as representative web pages can be easily retrieved for the medical phrase m . 
 
1. experimental results 
　we conducted experiments with various medical cases to demonstrate the effectiveness of imed's isa. 
 
1 setup 
　imed is a vertical search engine that crawls web pages from a few selected  high-quality medical web sites instead of all the web sites. in our experiments  we crawled 1gb of web pages from webmd   healthline   and merck   three of the most popular medical web sites. we used both real medical case records from the family medicine online database  fmod   and usmle medical exam questions . correct diagnoses are available for both of them and serve as the ground truth for our evaluation. usmle stands for the united states medical licensing examination  whose exam question format is similar to the format of actual  well-documented medical case records. physicians have to pass this exam to obtain their licenses for practicing medicine. in our tests  each exam question is treated as a medical case. fmod was developed by the college of medicine of the pennsylvania state university for educating medical students. the fmod records document patients' medical situations in great detail using mostly layman terms and can be easily understood by ordinary people. 
　ten colleagues served as assessors and independently evaluated imed. none of them has formal medical training. they performed search based on medical cases randomly selected from the fmod records and the usmle exam questions. for each user  we use 1 random medical cases that he cannot find the correct answers in a single pass.  we exclude from our evaluation those medical cases that the user can find the correct answers in a single pass  because he never invokes imed's isa for those cases.  two such medical cases were shown earlier in figures 1 and 1 in section 1. since both usmle and fmod cover almost every aspect of medical practice  our random samples have a broad coverage of medical topics. for each medical case  we randomly divided all ten users into two groups of the same size. when performing search  one group used imed with the isa while the other group used imed without the isa. 
　currently  imed is a research prototype. we have limited logs of user search sessions and are still in the process of collecting disease incidence rates from various sources  1  1   merging them  and matching them with the diseases in the diagnostic decision trees .  note that different sources can use various names for the same disease  and a general disease name can cover several more specific diseases.  due to these limitations  the current imed prototype uses uniform prior probabilities at several places. imed is still effective with these priors  but would provide more accurate recommendations if ideal priors are used. more precisely  our experiments assume that all the diseases have the same incidence rate. the prior probability that a searcher will select a symptom or sign is the same for all the symptoms and signs covered in imed's questionnaire. for a question asked by imed  a searcher will select all the candidate answers with equal likelihood.  
　in our experiments  a user has up to 1 minutes to perform iterative search for each medical case. at the end of the search process  the user can list up to three diseases that he thinks best match the medical case's situation description. if any of these diseases is among the correct diagnoses accompanying the data set  the search is considered successful. we allow users to search for a relatively long time  because medical information searchers care about their health and often spend hours on searching. we allow users to list multiple diseases as their findings  because even doctors sometimes cannot make precise diagnosis without lab test results. 
　similar to the trec interactive track   we use two sets of measures as the performance metrics for medical search engines: one set is objective while the other set is subjective. the objective performance measures include the success rate  the number of search iterations  the number of search result web pages viewed  and the time spent on the search process. the subjective performance measures include the users' perceptions of ease of using the system  ease of understanding the system  and overall satisfaction with the system. all these subjective performance measures are on a 1-point scale  with 1=low and 1=high . they were obtained from a brief questionnaire that users filled out after using the systems. for each objective or subjective performance measure  we average it over all the 1 medical cases and all the users  and report both its mean and its standard deviation when appropriate. we used anova as the significance test. our experiments were performed on a computer with two 1ghz processors  1gb memory  and one 1gb disk.  
 
1 overall results 
　imed's isa is efficient. on average  it takes less than two seconds to make suggestions in one iteration of the search process. imed's recommendations are also very helpful for searchers to find the correct diagnosis  where most of the searchers' time is spent on reading the search result web pages. the objective performance measures in table 1 show that the isa helps the user find results in fewer iterations  view fewer search result web pages  spend less time on the search process  and achieve a higher success rate. all these differences are statistically significant. 
 
table 1. objective performance measures  * means significant at  1 level . 
mean  standard deviation  without advisor with advisor success rate 1%  1%  1%*  1%  number of iterations 1  1  1*  1  number of search result web pages viewed 1  1  1*  1  time  minutes  1  1  1*  1   
table 1. subjective performance measures  * means significant at  1 level . 
mean  standard deviation  without advisor with advisor ease of using 1  1  1*  1  ease of understanding 1  1  1  1  satisfaction 1  1  1*  1   
　table 1 shows the subjective performance measures. as it takes time to become familiar with the isa  users consider the imed without the isa slightly easier to understand  while the difference is not statistically significant. nevertheless  once users understand the isa  they can use it without difficulty. with the isa  users can obtain much help and thus feel that imed becomes easier to use. overall  the isa greatly improves user satisfaction as it helps produce more useful search results with less user effort. these differences caused by the isa are statistically significant. 
 
1 two detailed examples 
　to give the reader a feeling of the suggestions made by imed  we present detailed results of imed's suggestions for the two example medical cases shown in figures 1 and 1.  
　the first example medical case is about a female complaining abdominal pain. for this medical case  one user writes  intermittent abdominal pain crampy diarrhea constipation  as the description of the patient's situation. figure 1 shows the corresponding suggestions provided by imed. the top six symptoms and signs suggested by imed are focal abdominal swelling  generalized abdominal swelling  rectal bleeding  rectal pain  vulval vaginal ulcerations  and vulval vaginal mass. depending on the specifics of the medical case  they can all be relevant to the patient's situation. the first recommended alternative answer is  persistent  to the question  is the pain colicky or persistent  . as mentioned in section 1  the user can find the correct diagnosis irritable bowel syndrome by choosing this alternative answer.  
　the top five medical phrases suggested by imed are dyspepsia  torsades de pointes  cutaneous fistula  vaginal fistula  and postoperative complications. dyspepsia is chronic or recurrent pain or discomfort centered in the upper abdomen. a cutaneous fistula is an abnormal passage or communication leading from an internal organ to the surface of the body. a vaginal fistula is an abnormal passage that connects the vagina to other organs. postoperative complications can cause abdominal pain. depending on the specifics of the medical case  the first  third  fourth  and fifth suggested medical phrases can be relevant to the patient's situation. 
　the second example medical case is about a female complaining vaginal bleeding. for this medical case  one user writes  vaginal bleeding pelvic pain  as the description of the patient's situation. the first symptom or sign suggested by imed is dyspareunia. as mentioned in section 1  the user can find the correct diagnosis endometriosis by choosing this symptom. 
　the top five medical phrases suggested by imed are prolapse  hyperplasia  dysmenorrhea  hemolysis  and uterine hemorrhage. prolapse means that an organ  such as the uterus  falls down or slips out of place. dysmenorrhea represents painful menstruation. uterine hemorrhage is the same as uterine bleeding. depending on the specifics of the medical case  the first  third  and fifth suggested medical phrases can be relevant to the patient's situation. 
　in general  for a medical case  imed can make several useful suggestions on the relevant symptoms and signs  alternative answers to the questions asked by imed  and related mesh medical phrases. 
 
1. acknowledgements 
　we thank jiuxing liu  jing wang  leiping wang  and hong xu for helpful discussions. 
 
