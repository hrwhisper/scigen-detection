mohammad mahdian
yahoo! research
¡¡1 mission college blvd. santa clara  ca 1. mahdian yahoo-inc.comkerem tomak
yahoo! inc.
1 mission college blvd. santa clara  ca 1. kerem yahoo-inc.com¡¡
abstract
the online advertising industry is currently based on two dominant business models: the pay-per-impression model and the pay-per-click model. with the growth of sponsored search during the last few years  there has been a move toward the pay-per-click model as it decreases the risk to small advertisers. an alternative model  discussed but not widely used in the advertising industry  is pay-per-conversion  or more generally  pay-per-action. in this paper  we discuss mechanisms for the pay-per-action model and various challenges involved in designing such mechanisms.
categories and subject descriptors
j.1  social and behaviorial sciences : economics; g.1  mathematics of computing : general
general terms
economics  theory
keywords
sponsored search  mechanism design  online advertising  pay-per-conversion
1. introduction
¡¡search engine marketing is continuing to be advertisers' choice which attracted roughly a third of the overall marketing and more than half of the digital marketing spending in the us alone in 1. the forecasts are that it is going to remain strong for at least another half decade . consumers' online purchase behavior is fueling this trend: they are spending more time  more money  search more for product information and hence attract more advertising.
¡¡there are two main online user activities targeted by the advertisers. these are impressions for brand awareness and clicks for traffic. in general  an advertiser is willing to pay for impressions if the aim of the advertising campaign is to
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. to copy otherwise  to republish  to post on servers or to redistribute to lists  requires prior specific permission and/or a fee.
adkdd '1 august 1  1  san jose  california  usa.
copyright 1 acm 1-1-1/1 ...$1.
increase brand awareness. however  s/he is more inclined to pay for clicks if the goal is to generate traffic which in turn increases the probability of a sale. in the former case  advertisers pay per impression  ppm  while in the latter they pay per click  ppc . the ppc model currently is based on a rank-by-revenue mechanism in which ads are sorted by their bid per click times click-through-rate  ctr .
¡¡with the growth of sponsored search in companies such as google  yahoo!  and msn  the trend in the online advertising market has been to shift more and more of the advertising budgets toward the ppc model. this is mainly due to the fact that the ppc model reduces the risk to advertise to consumers not in the target audience of an advertiser. if this risk is high  advertisers  in particular small advertisers who are more risk averse  tend to choose the ppc model over the ppm model.
¡¡as a complementary and more sensible approach  the pay per conversion/action  ppa  model links payments to events such as sales  phone calls  or online order directly. an advertiser states his/her willingness to pay for an action.  an action encapsulates anything beyond click. this includes pay-per-conversion  but also other things. an important distinction is that an  action  needs to be reported by the advertiser  perhaps through an automatic software agent supplied by the ad publisher   whereas clicks are counted by the ad publisher. this is the ultimate payment model for the advertisers since they can quantify the roi much better. with the ppa model  advertisers are at the driver's seat for the money they spend for online advertising. for many of the same reasons the ppc model has taken the market over the ppm model  we expect the online advertising market to evolve toward the ppa model in the future. early signs of such an evolution is evident in google's announcement of the ppa model in their adsense platform.
¡¡the ppa model also remedies the click fraud problem that has plagued the ppc model  1  1 . click fraud takes place if a company's employees repeatedly click on a competitor's link in an attempt to drain their marketing budgets or rogue web sites belonging to the ad networks of companies like yahoo! or google maliciously click on commercial links to generate more commissions for themselves. by linking payments to conversions or any action that is costly to perform  the incentive to fraud the system reduces drastically.
¡¡also  due to internet's infrastructure  accurate measurement of the number of impressions or click-throughs is very difficult. there are several reasons for this. one is due to the use of cache technology to serve ad images which injects noise into an ad-serving software's count of impressions .
this also creates an asymmetry of information between publishers and advertisers on the source of this counting discrepancy. this creates trust issues in ppc and ppm models that are eliminated in the ppa model.
¡¡in this paper  we discuss the ppa model  the advantages it offers  and issues that need to be resolved to successfully apply this model. our focus is on theoretical questions regarding incentive issues facing the advertisers in reporting the true action data. we show how the mechanisms proposed for the ppc model can be adapted to cope with challenges specific to the ppa model.
1. the pay-per-action model
¡¡in this section  we discuss what the pay-per-action  ppa  model is  and what advantages it offers. the ppa model.
¡¡the interaction of a user with an ad publisher like yahoo! or google starts with the user requesting a page from the publisher that contains ads. this results in an ad impression for the ads displayed on the page. the user might then click on an ad  resulting in a click-through. beyond this point  the user leaves the domain of the publisher and enters the advertiser's web site. in his/her interaction with this web site  the user might perform certain actions such as filling out a form  signing up at the web site  calling a phone number listed on the web site  or purchasing a merchandise listed on the web site. in the ppa model of online advertising  the advertiser can make payments contingent on not only impressions and click-throughs  but also actions. for example  the advertiser can offer to pay 1 cents for every impression of their ad  1 cents every time their ad is clicked on  plus $1 every time the user fills out a credit card application on their web site. the auction mechanism extracts all such bids from the advertisers  decides which ads to show  and how much each advertiser should be charged  depending on whether the ad is clicked on  and whether the advertiser reports that the ad has resulted in an action. a natural generalization of the common rank-by-revenue mechanism for the ppc model is to rank the advertisers based on their bid per impression  plus their bid per click times their click-through rate  ctr   plus their bid per action times their action rate.1
¡¡the major factor that distinguishes the ppa model from the ppc or ppm model is that an  action  takes place outside the scope of control of the publisher. in particular  the publisher needs to rely on the advertiser to report the actions that take place  perhaps through an automatic software agent supplied by the ad publisher   whereas clickthroughs are counted by the ad publisher. in fact  even the definition of an action can be different from one advertiser to another.
¡¡another distinction between the ppa model and ppc or ppm models is in the timing of events. an impression takes place instantaneously after the user requests a page and the publisher decides which ads to display on the page. also  a click-through often happens shortly after  if at all . however  an action such as buying a merchandise might take place days or even weeks after the user sees the ad. this makes the job of linking a particular action to an ad difficult. there are methods  such as using post-purchase surveys  or using the cookie technology to link the two  but the data obtained this way is inherently more noisy than the click-through or impression data. furthermore  the fact that the actions can occur in an order different from the order in which ads are displayed creates complications for designing a mechanism for selling ads in the ppa model  we will discuss this in further details later . the advertisers.
¡¡before discussing the advantages of the ppa model  we need to understand what generates value for an advertiser. in general  there are two factors that the advertisers value:
  attention. many advertisers  particularly brand advertisers  mainly seek attention from the users. as attention is difficult to measure  various other measures such as impressions  click-throughs  or other actions can be used as proxies for attention.
  conversion. a conversion is defined as any action that directly brings in some revenue. this often means buying a product from the advertiser's web site. however  there can be many other types of conversion  depending on the type of the advertiser. for example  for an ad portal  a click on one of the ads listed on the page can be considered a conversion as it brings immediate revenue.
¡¡there is a spectrum of advertisers  from purely attentionseeking advertisers such as big brands  e.g.  auto manufacturers  to purely conversion-seeking  e.g.  small online shops . also  some advertisers seek a combination of attention and conversion; for example  amazon.com's advertising campaign has been successful in generating conversions as well as acquiring considerable brand recognition as an online retailer.
advantages of the ppa model.
¡¡in the following  we list several advantages the ppa model offers over the more restrictive ppc and ppm models.
  trust requirement. in the ppm model  as in traditional magazine advertisements   the advertiser needs to trust the publisher to count the number of impressions of their ad. the situation is better for the ppc model  but still various technical difficulties produce discrepancies between the click statistics on the publisher side and on the advertiser side . in the ppa model  this issue is completely eliminated  as it is the advertiser who counts the number of actions.
  expressiveness. clearly  the ppa model is a more expressive bidding language than the ppc model. this expressiveness can sometimes result in a higher utility for the advertiser. this is explained in the following simple toy model:
assume an advertiser wants to bid for an ad slot with a reserve price of p per impression  i.e.  in a ppm model  the advertiser needs to bid at least p per impression to get the slot at a price of p per impression  or in a ppa model  if the advertiser bids x per action and her estimated actionrate is ¦Á  then the ad will be shown only if ¦Áx ¡Ý p  and the amount the ad will be charged if an action occurs is p/¦Á.
assume each impression of the ad leads to a conversion with probability ar. the advertiser does not know the exact value of ar  but based on previous estimates  she knows that ar is a uniform random value in  c1 c1 . each conversion brings a revenue of r for the advertiser  and the probability that the advertiser can detect that the conversion is resulted from an ad impression is a known value 1   ¦Å. the advertiser needs to decide how much to bid for the next n auctions  i.e.  the bid will not change during these n auctions .
in the above setting  it is easy to see that in the ppm model  the best strategy for the advertiser is to bid her expected value  c1 + c1 r/1. this results in an expected revenue of max 1  c1 + c1 r/1   p n. however  in the ppa model  the advertiser can submit a bid of r/ 1   ¦Å  per action  and report every action that she detects. assume the auction mechanism uses an algorithm for learning the action rate ar that quickly converges to an estimate in  1 ¡À ¦Ä  1   ¦Å ar for a small ¦Ä  and stays in this range for all n auctions1. this means that if the realized value of ar is such that r ¡¤ ar ¡¤  1   ¦Ä  ¡Ý p  then the advertiser wins the slot in all n auctions. if r ¡¤ ar ¡¤  1 + ¦Ä    p  then the ad will quickly drop below the reserve price and disappear  and hence the utility of the advertiser in this case will be o n . also  the probability that r ¡¤ ar ¡¤  1   ¦Ä    p ¡Ü r ¡¤ ar ¡¤  1 + ¦Ä  is small  and therefore the contribution of this case to the expected utility of the advertiser is small  details of this calculation is omitted here . thus  assuming    the overall expected revenue of the advertiser is
	rev	=	pr 

it is easy to see that for every is greater than max 1  c1 + c1 r/1 p n. this means that  not surprisingly   in cases where the estimates of the advertiser of the action rate is not very accurate  the added expressiveness of the ppa model can result in higher a utility for the advertiser. note that the ppa model is not more expressive if both advertiser and publisher have the same amount of information and can change the bid at the same rate  since in this case the advertiser can simulate a ppa mechanism and change her bid for every auction. however  often the advertisers can/do not update their bids very frequently1. also  the more volatile a market is  the harder it will be to have an accurate estimate of the action rate  and hence the gain from a ppa model in such markets is higher.
  reducing risk. in addition to increasing the advertisers' utility  a ppa model can reduce the risk to  some  advertisers. this can be seen in the model described above  as in cases where p/r ¡Ê   c1 + c1 /1 c1   in a ppm model the advertiser sometimes suffers a loss  when ar   p/r  while in the ppa model the potential loss is negligible.
  click fraud. click fraud is a phenomenon that has plagued the pay-per-click model for selling online advertisement. by definition  a fraudulent click is one that is done without the intention of buying a product. therefore  an obvious remedy for the click fraud problem  for conversionseeking advertisers  is to ask the advertisers to report clicks that lead to a conversion  and charge the advertiser only based on those clicks. given the data about which clicks lead to a conversion  publishers such as google or yahoo! can not only eliminate click fraud for the involved advertisers  but also find partner web-sites that are frequent targets of click fraud attacks  perhaps because their owners are committing click fraud   and discount their value for other advertisers as well.
1. challenges of the pay-per-action model
¡¡the main problem in the ppa model is the assumption that the advertisers voluntarily provide the action data to the publisher. however  the advertisers might not want to do so. in particular  there are three main reasons for advertisers not to provide a truthful report of the action data to the publisher:
  strategic reasons: advertisers might be able to increase their utility by misreporting the actions. for example  if the advertiser is charged a fixed amount per action  she might benefit from not reporting some of the actions.
  cost of gathering data: it might be costly to gather data about which clicks lead to action  especially because an action has different a meaning for each advertiser  many advertisers do not have the software means to track all the actions of their users  and the data is inherently very noisy.
  cost of disclosing data: many big advertisers treat the conversion data as confidential information that is valuable to them and their competitors  and therefore might not be willing to share this data with a publisher like yahoo! or google.
¡¡in the next section  we discuss the strategic factor  and show that in a simple model based on the click-fraud-resistant learning algorithms introduced by immorlica et al.  combined with a participation fee  advertisers cannot gain any significant amount by misreporting the actions. three issues we need to address are the false-name-proofness of the mechanism  which will be resolved by introducing participation fees   the payment scheme  and the timing issue: an action does not necessarily take place immediately after the click; in fact  it can take place days or weeks after the click  cookie-based technologies that are currently employed allow a conversion to be detected up to a month after the click takes place . this causes the ordering of reported actions to be different from the order the ads are displayed  which can cause complications for learning the action rate. we will briefly discuss this issue in the next section  and will leave further treatment of this question to future work. also  modeling and analyzing the other two factors for misreporting the action data  cost of gathering/disclosing the data  is left for future research.
1. the incentive problem
¡¡in this section  we discuss the problem of mechanism design in the ppa model with the aim of providing incentive for advertisers to reveal the action data truthfully to the auctioneer  the publisher . a major step toward this goal was taken in the paper of immorlica et al.  on click fraud. we start by briefly explaining their result and its implication for the ppa model  and then move on to a few specific problems in the ppa model.
¡¡the model focuses on one advertiser and one ad slot. the advertiser is interested in displaying an ad in the ad slot. in a ppm model with an auction mechanism such as generalized second price  the advertiser wins the slot if his bid per impression is more than a threshold p  and pays p per impression. the value of p is often the bid of the next advertiser or the reserve price. the details of how the mechanism computes p is irrelevant to our discussion; all we need to know is that p is independent of the bid or other characteristics of the advertiser. similarly  in a ppc model  if the advertiser has a bid bc per click  and our estimate of the click-through-rate of the advertiser  the probability that an impression of the ad leads to a click  is ctr  then the ad will be shown if bc ¡Á ctr ¡Ý p  and the advertiser will be charged an amount equal to p/ctr if a click occurs.1 intuitively  this means that assuming that the estimate ctr is accurate  the advertiser pays an expected amount of p per impression. if this is the case  then fraudulent clicks should not be able to increase the average cost per impression to the advertiser. this  however  assumes that the estimate ctr is accurate  which is not a reasonable assumption  especially in a scenario where an adversary injects fraudulent clicks. the main result of immorlica et al.  is that if the algorithm used to learn the click-through rate is from a class of algorithms termed click-based algorithms  then the conclusion is indeed true: fraudulent clicks cannot increase the average cost per impression to the advertiser by more than a negligible amount  i.e.  an amount that tends to zero as time goes to infinity .
¡¡immorlica et al.  also observe that their result applies to self-inflicted fraud as well  i.e.  if an advertiser creates fraudulent impressions that lead or not lead to clicks  he cannot change his average cost per impression by any non-negligible amount. this  taken in the context of a ppa model  replacing clicks in the argument by actions   implies that in a ppa model with a payment rule similar to the one for the ppc model and an action-rate learning algorithm from a suitable class of algorithms  the advertiser cannot change his average cost per impression by any non-negligible amount. there are  however  three issues that are left unanswered by this result:
  the payment rule when payments are associated with more than one type of event  impression  click  action : the model studied by immorlica et al.  assumes that the advertiser has a bid ba per action  ar is the estimated action rate for this advertiser  and p is the price-per-impression of the ad slot. in this setting  the mechanism displays the ad if ba¡Áar ¡Ý p  and charges the advertiser an amount equal to p/ar per action. however  in general the advertiser might want to specify a bid per impression bm  a bid per click bc  and a bid per action ba  or perhaps even different bids for different types of action . in this case  the mechanism must display the ad if bm+bc¡Áctr+ba¡Áar ¡Ý p  but it is not clear that in the event of a click or an action  how much the advertiser should be charged. there are many ways this charging scheme can be designed to yield an expected price per impression of p  for example  the bids per impression  click and actions can be discounted by the same or by different factors to make the expected payment equal to p . it is not clear for which  if any  of these rules the result of immorlica et al.  works.
  false-name bidding: the result of immorlica et al.  is asymptotic  in the sense that it shows that if an advertiser stays in the system for long enough the perimpression gain he can derive from misreporting the actions tends to zero. however  one plausible strategy for an advertiser is to stay in the system for a short time and gain from misreporting the actions  and then leave and re-enter the system with a different name.
  timing of events: in the model studied in   the mechanism learns whether an impression has led to an action or not immediately after the impression  and can use this information to update the estimate of the action-rate that will be used for allocating and pricing the next impression. while this is a reasonable model for the ppc model  since most clicks take place almost immediately after the impression   it is far from being realistic in the ppa model  where an action can take place weeks after the impression.
¡¡in the following  we briefly sketch how the above issues can be resolved. the details of the proofs are omitted here. the payment rule.
¡¡we consider the problem in the case where the advertiser can specify a bid bm for impressions and a bid ba for actions. in this case  the ad slot is allocated to the advertiser if bm + ar¡Ába ¡Ý p  where ar is the current estimate of the action rate. consider the following charging scheme: we define
	pm = min bm p 	and	pa =  p   pm /ar.	 1 
the advertiser is charged pm for every impression  and pa every time an action occurs. we can show that with this payment scheme  the result of immorlica et al.  holds with a very similar proof. to explain the intuition  we show this fact for the case that the learning algorithm simply estimates the action rate as 1 divided by the number of impressions since the last impression that lead to an action  this simple algorithm is a canonical case of an action-based learning algorithm .
¡¡consider the sequence of impressions  and two consecutive impressions i1 i1 in this sequence that have lead to an action  i.e.  these two impressions have lead to an action  but none of the impressions between them has . let k   1 denote the number of impressions between impressions i1 and i1. therefore  at the time of impression i1  the estimate for ar is equal to 1/k. therefore  the advertiser pays a price of  p pm k for the action corresponding to impression i1. we can re-assign this payment to impressions between i1 and i1  including i1  by assigning an amount equal to p pm to each of those impressions. in addition  each impression is charged an amount equal to pm. therefore  with this reassignment of charges  the cost corresponding to each impression will be precisely p.
¡¡the above argument can be generalized to more general learning algorithm that are action-based  defined analogously to the click-based algorithms of  . it is worth noting that other payment rules such as the proportional rule
		and	
do not yield the same result. therefore  for the purpose of designing a mechanism that incentivizes the advertisers to reveal the correct action data  it is important to use this particular payment scheme. false-name bidding.
¡¡our approach for tackling this problem is to charge each advertiser a fixed premium for entering the system  and stop displaying ads whose action rate drops below a certain rate. intuitively  the premium is set at a level so that an advertiser cannot gain by entering the system and not reporting any action  until his action-rate drops below the threshold. the premium is a small one-time fee  so it does not affect honest advertisers who stay in the system for long. also  all or part of the premium can be refunded to the advertiser upon leaving the system  depending on the advertiser's action rate upon leaving.1
¡¡the exact value of the premium depends on the threshold for the minimum allowable action rate  the action-rate learning algorithm  and how it initializes the action rate when an advertising campaign starts. for example  in the case where the action-rate learning algorithm estimates the action rate by the average over the last k actions  i.e.  ar is equal to k divided by the number of impressions it took to get the last k actions   initializing the ar to 1  i.e.  prepending the history by k impressions all leading to an action   the amount of premium can be calculated to be
 
where ¦Ä is the threshold for minimum allowable action rate. note that  not surprisingly   the amount of premium increases if the threshold ¦Ä is decreased  or if the value of k increases  which intuitively corresponds to increasing the robustness of the learning algorithm. timing.
¡¡a simple fix to the timing problem is to use any of the action-based algorithms for learning the action rate using the data available at the moment the estimate is needed  and re-adjust previous payments every time a new action is reported  e.g.  by refunding part of the charge for a previous action  if the new information reduces the payment for that action . we explain this with the following simple example: assume we use the learning algorithm that estimates the action rate as 1 divided by the number of impressions since the last impression that lead to an action. also  assume the advertiser has only specified a bid on actions  i.e.  no bid on impressions or clicks . with this learning algorithm  every time an action corresponding to an impression i is reported  if i is the latest impression for which an action is reported  then the advertiser will be charged an amount equal to p/ar  where ar is the estimate of the action-rate at the time of impression i. in other words  the charge corresponding to this action will be equal to p ¡Á k  where k is the number of impressions before impression i and after the last impression previously reported to lead to an action. if i is not the latest impression for which an action is reported  then this impression should be charged using a similar formula  but in addition  the charge corresponding to the first impression after i for which an action is previously reported should be adjusted. doing the calculations  it is easy to see that for this particular learning algorithm  this adjustment cancels out the charge for i; in other words  in this case action i will not be charged  since all the charge corresponding to this action are previously paid.
¡¡a potential problem with the learning algorithm used in the above example is that it consistently under-estimates the action rate. even though this is not a problem for charging scheme  it can cause problems in the allocation step  i.e.  if the action rate gets too low  the advertiser might not even get the slot . to resolve this problem  the learning algorithm should use some of the older data for which most of the actions have already occurred  e.g.  it is safe to assume that if no action corresponding to a month-old impression has taken place  the impression will not lead to an action . however  one must be careful not to include the element of time in the formula used for learning  since doing so renders the algorithm non-action-based  which causes the fraud-resistance result of immorlica et al.  to fail and opens the door for gaming the system by strategically timing the reports.1
¡¡the above discussions can be summarized in the following result. the proof of this result is based on the ideas mentioned above  but the details are omitted here.
¡¡theorem 1. consider a rank-by-revenue system with a payment rule according to  1  and a payment re-adjustment scheme as above that charges a large enough premium at the sign up  where the value of premium is calculated as described above  and does not show ads whose action rate has drops below a certain threshold. in this system  an advertiser cannot gain more than o 1  per impression by misreporting the actions and/or re-entering the system under other names.
1. conclusion
¡¡the contribution of this paper is two-fold: to discuss important theoretical questions in the design of incentivecompatible pay-per-action mechanisms for selling online advertisements  and to provide an answer to some of these questions. there are still many directions that remain unexplored. a few particular problems that we would like to emphasize are the following: cost of collecting action data.
¡¡as mentioned earlier  one of the barriers in using the ppa model for selling online advertisements is the difficulty of gathering action  or conversion  data. it would be interesting to model this factor  and design mechanisms where the auctioneer can provide incentive for the advertiser to spend the cost for collecting the data. notice that collecting the ppa data benefits not only the advertiser  but also the auctioneer  as the auctioneer can detect sources of fraud using this data  and avoid paying any commission to partner web sites that commit fraud. cost of disclosing data  the privacy issue .
¡¡larger advertisers usually have the tools to track and collect the action data  but might not be willing to share this potentially valuable information with the auctioneer. it would be interesting to explore the potential of using privacy-enhancing technologies to reduce this disincentive to use the ppa model. using action data to improve the ppc model.
¡¡one of the main reasons click fraud is an issue in online advertising is the obvious incentive of partner web-sites  i.e.  web sites that are not owned by publishers like google or yahoo! but allow these publishers to display ads in return for a commission  to commit click fraud to increase their commission. for this reason  fraud is usually targeted at particular partner web-sites  and not on particular advertisers. this means that even if some percentage of the advertisers use the ppa model to buy ads  the publisher can use the action data that they provide to detect partner web sites that are targets of fraud  and alleviate the fraud problem by discounting the value of a click on such web sites. however  this creates an obvious incentive problem  as the data an advertiser provides is used to change not only his effective bid  but also the effective bid of other advertisers. it would be interesting to explore this tradeoff between incentive compatibility in reporting the action data  and the potential use of the action data in calculating discount rates for partner web sites. robustness vs. adaptivity tradeoff.
¡¡there is a tradeoff between how robust the estimate of the learning algorithm is toward random noises in the data  affected by the length of history the learning algorithm looks at  and how quickly can the algorithm adapt to changes in the action rate caused by changes in the market. the optimal point in this tradeoff should depend on parameters such as the volatility of the market and the amount of noise. furthermore  by the discussion in the previous section  two other parameters  namely the action-rate threshold below which the ad is dropped and the amount of premium that needs to be charged  also enter this tradeoff. a theoretical analysis of this tradeoff remains open.
