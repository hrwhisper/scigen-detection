cern is one of the major laboratories in high energy physics. it consists of two large sites and several smaller ones. unfortunately cern's buildings are chrono-chaotically numbered. they are therefore most of the time hard to find without a map and index.
a www browser can be used to retrieve the location of a building by name or number. a set of electronic maps containing the different cern sites are available in postscript format. these maps are used to build a database of the locations of the buildings which together with the maps are accessed by some cgi scripts to provide the browser with a set of gif bitmap images. these images show the full cern site  the site of the requested building and an enlargement of the exact location of the building.
a palm application can be used to access these same maps. in this application the maps are stored on the palm and are drawn on request in real time. the user is thus able to lookup buildings and to interactively scale and translate the resulting picture. the application is written in java to provide portability in future to other hand-held devices.
keywords
maps; buildings; perl; cgi; java; kvm; palm; palmos;
1 buildings and maps
cern has more than ten sites containing over 1 buildings. these buildings were often numbered on an ad-hoc basis. to find your way around the chrono-chaotically numbered buildings at cern you need a map and an index. apart from hardcopies  online access via the web  http://www.cern.ch/building  using a web browser and offline access to the maps using a palm  http://www.cern.ch/palm-applications  have been made available. both web and palm interfaces use several maps  drawn up in postscript  as their source of information. building locations and detailed maps are all derived from a single source.
1 the web interface
the web interface is based on a standard web browser being able to show images in gif format and a set of cgi-scripts. a web form allows the user to lookup a building by name or number  see figure 1. the building location is searched for in a coordinate database  using a cgi-script. this database is extracted offline from the original postscript map. the result of the lookup is an html file containing a reference to a gif. this reference contains enough information for another cgi-script to produce the map of that building. the cgi-script generates this gif showing the location of the building on a detailed map  the location of the detailed map on a site map  and the location of the site map on the cern map  see figure 1.
the generation of the map gif image is done by using the postscript map files as input for ghostscript to zoom in on the detail  translate and crop the resulting picture. the netpbm package is used to add targets and squares on the resulting maps  to glue the maps together and to convert them finally into one gif file. the on-the-fly production of a gif currently takes a few seconds.
the database is produced offline with a converter program. it scans multiple postscript map files for text entries and builds a database file to lookup text against maps and coordinates. gifs for buildings can be produced offline and cached for fast retrieval.

figure 1: the initial building lookup form for the building interface via www  showing an overview map of cern.
1 the palm interface
the cern maps are also available on the palm  see figure 1. the palm keeps all the postscript maps  pre-converted  in memory and is able to draw  scale and translate them interactively. the drawing program and the converter are both implemented in the java language for portability reasons. the drawing program runs using the kvm  an implementation of the java micro edition on the palm.
all postscript maps run through an offline converter which builds a compressed database for the palm. this database contains building names and numbers  coordinates of their location and all maps in the form of vectors  split up in several layers.

figure 1: the result of the lookup  showing detailed information of building 1  its location on the meyrin site and the location of the meyrin site within cern.

a gui program provides different panels to display maps  to do lookups and to handle user interaction. it also handles the decoding of the database format. a search through the building numbers allows for fast access to any building's location. a conventional graphics engine draws vectors and text straight out of the database.
1 conclusions
choosing postscript as our single and only source of information for the cern maps has proven to be very easy to maintain and keep up to date. other large sites or floor plans of libraries and computer centres could use the same interfaces for access from the web or on the palm. the web interface has been available for some time now and has proven its usefulness  while the java palm interface was only recently added.
